<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Badges - Documentation - iTerm2 - macOS Terminal Replacement</title>
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="iTerm2 is a replacement for Terminal and the successor to iTerm">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/app.css" />

  <script>
    // Begin Google Analytics
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	   })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-22363859-1', 'auto');
    ga('send', 'pageview');
    // End Google Analytics
  </script>

</head>
<body>
  <header>  
    <div class="row">
      <div class="small-12 medium-12 large-10 large-centered columns wide-row">
        <div class="text-center"><a href="/index.html"><img src="/img/logo2x.jpg" width=800 height=312></a></div>
        <div class="sticky contain-to-grid">
          <nav class="top-bar" data-topbar>
            <ul class="title-area">
              <li class="name">

              </li>
              <li class="toggle-topbar menu-icon"><a href="#">Menu</a></li>
              <li class="small-screen-donate">
		  <a href="/donate.html"><img src="/images/DonateButton.png" width="92" height="26"></a>
                </li>
            </ul>

            <section class="top-bar-section">
              <!-- Right Nav Section -->
              <ul class="right">
                <li>
		  <a href="/donate.html"><img src="/images/DonateButton.png" width="92" height="26"></a>
                </li>
              </ul>
            </li>
          </ul>

          <!-- Left Nav Section -->
          <ul class="left">
            <li ><a href="/index.html">Home</a></li>
            <li ><a href="/news.html">News</a></li>
            <li ><a href="/features.html">Features</a></li>
            <li ><a href="/faq.html">FAQ</a></li>
            <li class="active"><a href="/documentation.html">Documentation</a></li>
            <li ><a href="/downloads.html">Downloads</a></li>
          </ul>
        </section>
      </nav>
    </div>
  </div>
</div>
</header>
<div class="row">
  <div class="small-12 medium-12 large-10 large-centered columns wide-row">
    <div class="main panel">
      <div class="doc-wrapper">
<a href="#" data-dropdown="drop-menu">Table of Contents</a>
<div id="drop-menu" data-dropdown-content class="f-dropdown content">
        <div class="inner-menu">
                <ul class="sub-nav">
<div class="toc_subhead">Introduction</div>

<li><a href="documentation-highlights.html">Highlights for New Users</a></li>
<li><a href="documentation-general-usage.html">General Usage</a></li>

<div class="toc_subhead">User Interface</div>

<li><a href="documentation-menu-items.html">Menu Items</a></li>
<li><a href="documentation-preferences.html">Preferences</a></li>
<li><a href="documentation-touch-bar.html">Touch Bar</a></li>
<li><a href="documentation-copymode.html">Copy Mode</a></li>
<li><a href="documentation-fonts.html">Fonts</a></li>
<li><a href="documentation-search-syntax.html">Profile Search Syntax</a></li>

<div class="toc_subhead">Features</div>

<li><a href="documentation-automatic-profile-switching.html">Automatic Profile Switching</a></li>
<li><a href="documentation-badges.html">Badges</a></li>
<li><a href="documentation-buried-sessions.html">Buried Sessions</a></li>
<li><a href="documentation-captured-output.html">Captured Output</a></li>
<li><a href="documentation-coprocesses.html">Coprocesses</a></li>
<li><a href="documentation-hotkey.html">Hotkeys</a></li>
<li><a href="documentation-restoration.html">Session Restoration</a></li>
<li><a href="documentation-shell-integration.html">Shell Integration</a></li>
<li><a href="documentation-smart-selection.html">Smart Selection</a></li>
<li><a href="documentation-tmux-integration.html">tmux Integration</a></li>
<li><a href="documentation-triggers.html">Triggers</a></li>
<li><a href="documentation-utilities.html">Utilities</a></li>

<div class="toc_subhead">Advanced</div>

<li><a href="documentation-scripting.html">Scripting</a></li>
<li><a href="documentation-dynamic-profiles.html">Dynamic Profiles</a></li>
<li><a href="documentation-images.html">Inline Images Protocol</a></li>
<li><a href="documentation-escape-codes.html">Proprietary Escape Codes</a></li>

                </ul>
        </div>
</div>
<section class="doc-section">
<hr>
<h1>Badges</h1>
<script>
function show(name) {
  document.getElementById("bash").style.display="none";
  document.getElementById("fish").style.display="none";
  document.getElementById("tcsh").style.display="none";
  document.getElementById("zsh").style.display="none";
  document.getElementById(name).style.display="";
}
</script>


<p>A <em>badge</em> is a large text label that appears in the top right of a terminal session to provide dynamic status, such as the current host name or git branch. Its initial value is defined in <strong>Preferences&gt;Profiles&gt;General&gt;Badge</strong> and it can be changed by an iTerm2-proprietary escape sequence. It may also reference iTerm2- and user-defined variables.</p>

<p>Here is an example of a session with a badge indicating the current user and host name.</p>

<p><img src="images/Badge.png"></p>

<h3>Availability</h3>

<p>Support for badges is available in version 2.9 and later, currently distributed in the <a href="/nightly/latest">nightly builds</a> and is in the master branch of the <a href="https://github.com/gnachman/iTerm2">GitHub repo</a>. It is not in version 2.1.1.</p>

<h3>Variables</h3>

<p>A badge may reference variables. There are two kinds of variables: user-defined variables and iTerm2-defined variables. User-defined variables may be set by an escape sequence described below.</p>

<p>The syntax for referencing a variable is to place the variable name between <em>\(</em> and <em>)</em>. For example:</p>

<pre>
\(session.username)@\(session.hostname)
</pre>


<p>Undefined variables evaluate to an empty string.</p>

<h3>iTerm2-Defined Variables</h3>

<p>The following variables are defined by iTerm2:</p>

<table style="background: white">
  <tr class="tableheader">
    <th style="width: 100pt">Variable Name</th>
    <th>Description</th>
  </tr>

  <tr>
    <td>session.name</td>
    <td>The current session's name. Defaults to the profile name. May be changed with the escape sequence <strong>OSC 1 ; <i>name</i> ST</strong>, or by editing the session title in <strong>View&gt;Edit Current Session</strong>.</td>
  </tr>

  <tr>
    <td>session.columns</td>
    <td>The number of columns in the current session.</td>
  </tr>

  <tr>
    <td>session.rows</td>
    <td>The number of rows in the current session.</td>
  </tr>

  <tr>
    <td>session.hostname</td>
    <td>The current hostname. Only set if <a href="shell_integration.html">Shell Integration</a> is installed.</td>
  </tr>

  <tr>
    <td>session.username</td>
    <td>The current username. Only set if <a href="shell_integration.html">Shell Integration</a> is installed.</td>
  </tr>

  <tr>
    <td>session.path</td>
    <td>The current path. Works best if <a href="shell_integration.html">Shell Integration</a> is installed.</td>
  </tr>
</table>


<h3>User-Defined Variables</h3>

<p>You can provide additional information in the form of user-defined variables. To create a user-defined variable you must modify your shell's rc script by defining a function named iterm2_print_user_vars that calls iterm2_set_user_var one or more times. See the example below.</p>

<p>Here's an example that sets a user-defined variable called "gitBranch" to the git branch of the current directory. Pick your shell to see the version you need: <a style="cursor:pointer" onclick="show('bash')">bash</a> |
<a style="cursor:pointer" onclick="show('fish')">fish</a> |
<a style="cursor:pointer" onclick="show('tcsh')">tcsh</a> |
<a style="cursor:pointer" onclick="show('zsh')">zsh</a></p>

<pre id="bash">
# bash: Place this in .bashrc.
function iterm2_print_user_vars() {
  iterm2_set_user_var gitBranch $((git branch 2> /dev/null) | grep \* | cut -c3-)
}
</pre>


<pre id="fish" style="display: none">
# fish: Place this in ~/.config/fish/config.fish after the line
# "source ~/.iterm2_shell_integration.fish".
function iterm2_print_user_vars
  set -l git_branch (git branch ^/dev/null | sed -n '/\* /s///p')
  iterm2_set_user_var gitBranch "$git_branch"
end
</pre>


<pre id="tcsh" style="display: none">
# tcsh: Place this in .tcshrc
alias get_current_branch "bash -c '((git branch 2> /dev/null) | grep \* | cut -c3-)'"
alias _iterm2_user_defined_vars \
    'iterm2_set_user_var gitBranch `get_current_branch | base64`'

# Note: you always need to manually base64 encode the second argument to
# iterm2_set_user_var. If you want to define more than one variable,
# use the pattern:
# alias _iterm2_user_defined_vars \
#   '(iterm2_set_user_var key1 value1; iterm2_set_user_var key2 value2; ...)'
</pre>


<pre id="zsh" style="display: none">
# zsh: Place this in .zshrc after "source /Users/georgen/.iterm2_shell_integration.zsh".
iterm2_print_user_vars() {
  iterm2_set_user_var gitBranch $((git branch 2> /dev/null) | grep \* | cut -c3-)
}
</pre>


<br/>


<p>To reference a user-defined variable, refer to it as <em>\(user.variableName)</em>. For example, to use the example above, you could set your profile's badge to:</p>

<pre>
Current git branch on \(session.hostname) is \(user.gitBranch)
</pre>


<h3>Escape Sequences</h3>

<p>User-defined variables may be set with the following escape sequence:</p>

<pre>
OSC 1337 ; SetUserVar=<i>name</i>=<i>Base64-encoded value</i> ST
</pre>


<p>This is what iterm2_set_user_var sends. Generally you should use the <em>iterm2_print_user_vars</em> mechanism described above instead of sending this escape sequence directly.</p>

<p>The badge itself may be set with the following escape sequence:</p>

<pre>
OSC 1337 ; SetBadgeFormat=<i>Base-64 encoded badge format</i> ST
</pre>


<p>Here's an example that works in bash:</p>

<pre style="white-space: pre">
# Set badge to show the current session name and git branch, if any is set.
printf "\e]1337;SetBadgeFormat=%s\a" \
  $(echo -n "\(session.name) \(user.gitBranch)" | base64)
</pre>


<h3>Color</h3>

<p>The badge's color may be set in <em>Preferences&gt;Profiles&gt;Colors</em>.</p>


</div>

    </div>
  </div>
</div>
<footer>
  <div class="row">
    <div class="small-12 medium-12 large-10 large-centered columns text-center">
      <p>iTerm2 by George Nachman. Website by Matthew Freeman, George Nachman, and James A. Rosen.</p>
      <p>Website updated and optimized by <a href="http://hexbrain.com" target="_blank">HexBrain</a></p>
    </div>
  </div>
</footer>
<script src="/js/scripts.js"></script>                
<script type="text/javascript">
  function showId(id) {
    document.getElementById("changelist" + id).style.display = 'block';
    document.getElementById("show" + id).style.display = 'none';
    document.getElementById("hide" + id).style.display = 'inline';
  }

  function hideId(id) {
    document.getElementById("changelist" + id).style.display = 'none';
    document.getElementById("show" + id).style.display = 'inline';
    document.getElementById("hide" + id).style.display = 'none';
  }
  $(document).foundation();
</script>
</body>
</html>
