<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Documentation - iTerm2 - macOS Terminal Replacement</title>
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="iTerm2 is a replacement for Terminal and the successor to iTerm">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/app.css" />

  <script>
    // Begin Google Analytics
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	   })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-22363859-1', 'auto');
    ga('send', 'pageview');
    // End Google Analytics
  </script>

</head>
<body>
  <header>  
    <div class="row">
      <div class="small-12 medium-12 large-10 large-centered columns wide-row">
        <div class="text-center"><a href="/index.html"><img src="/img/logo2x.jpg" width=800 height=312></a></div>
        <div class="sticky contain-to-grid">
          <nav class="top-bar" data-topbar>
            <ul class="title-area">
              <li class="name">

              </li>
              <li class="toggle-topbar menu-icon"><a href="#">Menu</a></li>
              <li class="small-screen-donate">
		  <a href="/donate.html"><img src="/images/DonateButton.png" width="92" height="26"></a>
                </li>
            </ul>

            <section class="top-bar-section">
              <!-- Right Nav Section -->
              <ul class="right">
                <li>
		  <a href="/donate.html"><img src="/images/DonateButton.png" width="92" height="26"></a>
                </li>
              </ul>
            </li>
          </ul>

          <!-- Left Nav Section -->
          <ul class="left">
            <li ><a href="/index.html">Home</a></li>
            <li ><a href="/news.html">News</a></li>
            <li ><a href="/features.html">Features</a></li>
            <li ><a href="/faq.html">FAQ</a></li>
            <li class="active"><a href="/documentation.html">Documentation</a></li>
            <li ><a href="/downloads.html">Downloads</a></li>
          </ul>
        </section>
      </nav>
    </div>
  </div>
</div>
</header>
<div class="row">
  <div class="small-12 medium-12 large-10 large-centered columns wide-row">
    <div class="main panel">
      <div class="doc-wrapper">
<p>iTerm2 should require little explanation for users accustomed to terminal emulators. Even if you are an experienced user, take the time to read through the highlights section of this document. It will familiarize you with some features of iTerm2 that you may not have seen in other terminal emulators that can make a real difference in the way you work.</p>

<h3>Table of Contents</h3>

<UL>
<li><a href="#documentation-highlights.html">Highlights for New Users</a></li>
<li><a href="#documentation-general-usage.html">General Usage</a></li>
<li><a href="#documentation-menu-items.html">Menu Items</a></li>
<li><a href="#documentation-preferences.html">Preferences</a></li>
<li><a href="#documentation-scripting.html">Scripting</a></li>
<li><a href="#documentation-shell-integration.html">Shell Integration</a></li>
<li><a href="#documentation-smart-selection.html">Smart Selection</a></li>
<li><a href="#documentation-triggers.html">Triggers</a></li>
<li><a href="#documentation-captured-output.html">Captured Output</a></li>
<li><a href="#documentation-fonts.html">Fonts</a></li>
<li><a href="#documentation-images.html">Inline Images</a></li>
<li><a href="#documentation-badges.html">Badges</a></li>
<li><a href="#documentation-dynamic-profiles.html">Dynamic Profiles</a></li>
<li><a href="#documentation-search-syntax.html">Profile Search Syntax</a></li>
<li><a href="#documentation-automatic-profile-switching.html">Automatic Profile Switching</a></li>
<li><a href="#documentation-coprocesses.html">Coprocesses</a></li>
<li><a href="#documentation-restoration.html">Session Restoration</a></li>
<li><a href="#documentation-utilities.html">Utilities</a></li>
<li><a href="#documentation-escape-codes.html">Proprietary Escape Codes</a></li>

</UL>


<p><a name="documentation-highlights.html"></a></p>

<hr>


<h2>Highlights for New Users</h2>

<p>This chapter describes features of iTerm2 that go beyond basic usage and are not generally found in other terminal emulators.</p>

<h4>Text Selection</h4>

<p>There are two ways to select text to copy to the clipboard: you can use the mouse, or you can use the find feature's "mouseless copy" feature. Text selection by mouse is described later in General Usage section.</p>

<p>To select text without using the mouse, press cmd-f to open the find field. Enter the beginning of the text you wish to copy and the find feature will select it in your window. Then press tab and the end of the selection will advance by a word. To move the beginning of the selection to the left, press shift-tab. At most one line of text can be selected this way.</p>

<p>In Prefs > Profiles > Keys you can assign keys to move the beginning or end of the selection by a single character, word, or line. No such keys are bound by default.</p>

<h4>Split Panes</h4>

<p>iTerm2 allows you to divide a tab into many rectangular "panes", each of which is a different terminal session. The shortcuts cmd-d and cmd-shift-d divide an existing session vertically or horizontally, respectively. You can navigate among split panes with cmd-opt-arrow or cmd-[ and cmd-]. You can "maximize" the current pane--hiding all others in that tab--with cmd-shift-enter. Pressing the shortcut again restores the hidden panes.</p>

<h4>Hotkey Window</h4>

<p>iTerm2 offers a special terminal window that is always available with a single keystroke. This window is called the "hotkey window" and is most commonly used for occasional administrative tasks. To enable this feature, go to Preferences > Keys. Enable "Show/Hide iTerm2 with a system-wide hotkey". Click in the field and enter the key combination you'd like to use. Then check "hotkey toggles a dedicated window with profile:". A new profile will be created that is optimized for the feature. Pressing the hotkey will drop a terminal window down from the top of the screen, and pressing it again (or clicking in any other window) causes it to disappear.</p>

<h4>Swap Cmd and Option</h4>

<p>iTerm2 allows you to remap modifiers. You have separate control over left and right command and option keys. One common need is to exchange cmd and option. To do this, go to Preferences > Keys. Set Left option key to Left command key and Left command key to Left option key (and do the same for Right command and Right option if you please). You can add exceptions if you don't want certain combinations to be remapped (for example, cmd-tab) by adding a new global shortcut with the action "Do Not Remap" and the keystroke of the (unremapped) key you wish to keep unaffected by modifier remapping.</p>

<h4>Save Mark/Jump to Mark</h4>

<p>You can mark a location in a session with cmd-shift-M and then jump back to it with cmd-shift-J. This is useful, for instance, if you suspend your editor to compile a program and it emits errors. You can save a mark at that point and then return to your editor to fix the errors. As you work, you can jump back to the compilation errors with cmd-shift-J.</p>

<h4>Regular Expression Search</h4>

<p>When you open the find field (cmd-f) there is a down-arrow on the left of the field by the magnifying glass. Clicking it opens a menu of options in which you can enable regular expression search. The <a href="http://userguide.icu-project.org/strings/regexp#TOC-Regular-Expression-Metacharacters">ICU syntax</a> is used.</p>

<h4>Autocomplete</h4>

<p>Any text that exists in a tab or its scrollback buffer can be autocompleted in that tab. To use autocomplete, type the beginning of a word and then press cmd-;. An autocomplete window opens showing the top 20 choices for words beginning what what you have entered. The list can be filtered by typing a subsequence. The filter can be reset by pressing backspace. If you make a selection and press return, it will be entered for you. If you make a selection and press tab, your autocomplete will be extended with the selection.</p>

<h4>Paste History</h4>

<p>Whenever text is copied or pasted in iTerm2 it is added to the paste history. You can access paste history with cmd-shift-H. It can be filtered by typing a subsequence, and the filter can be cleared by pressing backspace. You can choose to have your paste history saved to disk by turning that option on under Preferences > General > Save copy/paste history to disk.</p>

<h4>Instant Replay</h4>

<p>Sometimes interactive programs will overwrite something of interest on the screen (for example, top(1) does this all the time). Normally, this would be lost forever. With Instant Replay, you can step back in time to see exactly what was on your screen at some point in the recent past. To enable, press cmd-opt-B. Once you are in instant replay mode, you can use the left and right arrow keys to navigate back and forward through time. Esc exits instant replay mode. By default, each session uses up to 4MB to save its instant replay history, and this can be adjusted under Preferences > General > Instant Replay uses __ MB per session.</p>

<p>Another benefit of Instant Replay is that it shows you the exact time that something appeared on your screen down to the second. This is useful when trying to figure out when an error occurred, for example.</p>

<h4>Full Screen</h4>

<p>You can press cmd-enter and iTerm2 will take up the entire screen. If you had a transparent background configured, it will be turned off upon entering full screen mode to reduce distractions. You can re-enable it with cmd-U. Unlike most macOS apps, iTerm2 can open a fullscreen window in the same desktop with no annoying animation if you disable Preferences > General > Native full screen windows.</p>

<h4>High-Color Modes</h4>

<p>iTerm2 supports 256 color mode. To enable this for csh shells, set your terminal to xterm-256color (under Preferences > Profiles > Terminal > Report Terminal Type). Some applications may need to be configured to support this mode. In vim, add this to your .vimrc:</p>

<pre><code>set t_Co=256
</code></pre>

<p>iTerm2 also supports 24-bit color.</p>

<h4>Focus Follows Mouse</h4>

<p>This option is off by default, but can be enabled under Preferences > Pointer > Focus follows mouse. It only affects iTerm2 windows.</p>

<h4>Middle Button Paste</h4>

<p>If you have a three-button mouse, by default the middle button performs "paste".</p>

<h4>Cursor Finery</h4>

<p>When using a block cursor, it's hard to pick a cursor color that's visible against every background color. If you enable Smart cursor color (under Preferences > Profiles > Colors) then the cursor color will be dynamically chosen to be visible against the text it is over and the adjacent cells.</p>

<p>If you prefer a white or black cursor, you can use the "cursor boost" feature (under Preferences > Profiles > Colors) to make all colors other than the cursor dimmer.</p>

<p>Do you have trouble finding your cursor? You can turn on the cursor guide by toggling the View > Show Cursor Guide menu item or turning on Preferences > Profiles > Colors > Cursor Guide. This can also be toggled by an escape sequence. For example, add this to your .vimrc:</p>

<pre><code>let &amp;t_ti.="\&lt;Esc&gt;]1337;HighlightCursorLine=true\x7"
let &amp;t_te.="\&lt;Esc&gt;]1337;HighlightCursorLine=false\x7"
</code></pre>

<p>If you've lost your cursor, press Cmd-/ or select View > Find Cursor and the cursor's position on the screen will be indicated very clearly</p>

<h4>Minimum Contrast</h4>

<p>Sometimes an application will display text with a color combination that is hard to read. Colorblind users in particular may find certain combinations hard to see if the colors differ only in hue and not brightness. If you enable minimum contrast (under Preferences > Profiles > Colors > Minimum contrast, then iTerm2 will guarantee a minimum level of brightness difference between the foreground and background color of every character. If you set this to its maximum value, then all text will be black or white.</p>

<h4>Growl and Notification Center Support</h4>

<p>If you enable Growl (Preferences > Profiles > Terminal > Send Growl/Notification Center alerts) then you'll receive messages when a terminal beeps, has output after a period of silence, or terminates. There's also <a href="documentation-escape-codes.html">a proprietary escape sequence</a> to send a notification. You can adjust the kinds of notifications that get posted in Preferences > Profiles > Terminal > Filter Alerts.</p>

<h4>Exposé Tabs</h4>

<p>If you have too many tabs and are unable to find the one you're looking for, you can use the Exposé Tabs feature to find it. Press cmd-opt-E and all your tabs will be shown at once. You can then perform a search over all tabs simultaneously to find what you're looking for.</p>

<h4>Window Arrangements</h4>

<p>You can take a snapshot of your open windows, tabs, and panes with the menu option Window > Save Window Arrangement. You can restore this configuration with Window > Restore Window Arrangement, or you can choose to have it automatically restored when you start iTerm2 with Preferences > General > Open saved window arrangement.</p>

<h4>Smart Selection</h4>

<p>Performing a quad-click does a "smart selection," which selects text under the pointer in a way appropriate to its content. For example, URLs, quoted strings, and email addresses (among many other objects) are recognized and selected in their entirety. You can also bind actions to a smart selection rule. The first action takes effect when you cmd-click on text matching the rule. All actions are added to the context menu when you right click on text matching the rule.</p>

<h4>Triggers</h4>

<p>Triggers are user-configurable regular expressions with associated actions that run when text is received that matches the regex. Actions include highlighting the matching text, showing an alert, sending text back, and more.</p>

<p>One advanced use of a trigger is to capture output matching a regex and display just those matching lines in the toolbelt. For example, you could create a trigger that matches compiler errors. When you run Make the errors will appear on the side of your window and you can click each to jump right to it. More information is available at the <a href="captured_output.html">Captured Output</a> manual.</p>

<h4>Tmux Integration</h4>

<p>iTerm2 is tightly integrated with tmux. The integration allows you to see tmux windows as native iTerm2 windows or tabs. The tmux prefix key is not needed, as native menu commands operate on tmux windows. For more information, please see the <a href="https://gitlab.com/gnachman/iterm2/wikis/TmuxIntegration">iTerm2-tmux Integration</a> document.</p>

<h4>Coprocesses</h4>

<p>Coprocesses are programs that run alongside iTerm2 and are bound to a single session. All output bound for the session is also routed as input to the coprocess. The coprocess's output acts like the user typing at the keyboard. Coprocesses can be used to automate tasks. For more information, see the <a href="documentation-coprocesses.html">Coprocess</a> document.</p>

<h4>Dynamic Profiles</h4>

<p>If you have hundreds or thousands of profiles, look in to <a href="dynamic-profiles.html">Dynamic Profiles</a>. This feature allows you to define profiles in JSON.</p>

<h4>Automatic Profile Switching</h4>

<p>You can automatically change the current session's profile using <a href="automatic-profile-switching.html">Automatic Profile Switching</a>. For example, this would allow you to change the background color when you are on a production system.</p>

<h4>Inline Images</h4>

<p>iTerm2 can display images inline, including animated GIFs. More information is available at the <a href="images.html">Inline Images</a> document. An extension of this feature allows you to download files from a remote host over ssh simply by running a shell script. This script can be installed for you automatically when you install Shell Integration, described below.</p>

<h4>Undo Close</h4>

<p>If you accidentally close a session, you get five seconds (by default; configurable in Preferences > Profiles > Session) to undo it by pressing Cmd-Z.</p>

<h4>Shell Integration</h4>

<p>Shell Integration is a feature exclusive to iTerm2 that uses knowledge about your shell prompt to help you navigate from one shell prompt to another, record your command history, suggest most used directories, helps you re-run commands, download files from remote hosts with a click, upload files to remote hosts with drag and drop, and more. See the <a href="shell_integration.html">Shell Integration</a> documentation for all the details.</p>

<h4>Password Manager</h4>

<p>iTerm2 can save your passwords in the Keychain. Use the Window > Password Manager menu item to open the password manager and enter your passwords.</p>

<h4>Timestamps</h4>

<p>Toggle View > Show Timestamps to indicate the time each line was last modified. This is useful for telling how long operations took or when a message was printed.</p>

<h4>Tab Bar on Left</h4>

<p>You can position the tab bar on the left side of the window. This is useful if you have a really large number of tabs.</p>

<h4>Open Quickly</h4>

<p>If you have lots of sessions you can quickly find the one you're looking for with Open Quickly. Select the View > Open Quickly menu item (cmd-shift-O) and then enter a search query. You can search by tab title, command name, host name, user name, profile name, directory name, badge label, and more. Open Quickly also lets you create new tabs, change the current session's profile, and open arrangements. If you start your query with a / then that gives you a shortcut to various commands. Enter a query of / to see them.</p>

<p><a name="documentation-general-usage.html"></a></p>

<hr>


<h2>General Usage</h2>

<h4>Tabs</h4>

<p>When you first start iTerm2, a window opens showing a terminal session. If you want to open more that one session at a time, you have a few options: You can create a new window (Shell > New Window), you can create a new tab (Shell > New Tab), or you can split the current session into two panes (Shell > Split Horizontally, Shell > Split Vertically), each of which is a separate session.</p>

<p>Tabs in iTerm2 behave like tabs in other programs, most notably web browsers like Safari, Firefox, and Google Chrome. Note that you can drag and drop tabs to reorder them within a window. You can drag tabs from one window to another, and you can drag a tab from a window into a new window by dropping it outside any iTerm2 window's tab bar.</p>

<p>By default, the label of each tab is the name of the job that's running in that session. Some systems are configured to augment this with additional information such as the hostname you're logged in to or your current directory (this is done by sending a special code of ESC]0;string ^G).</p>

<p>Tab labels have indicators that tell you their status. A blue dot means new input was received. An activity indicator means new out is being received. When the session ends, a  ⃠ icon appears in the tab. You can customize these indicators in Preferences > Appearance.</p>

<h4>Edit Current Session</h4>

<p>The <em>Edit Current Session</em> panel lets you modify the appearance of a single session. If you customize some attribute of the session (for example, by changing the default text color) then subsequent changes to that same attribute in the profile will not affect the customized session. However, changes to other attributes of the profile will affect the customized session.</p>

<h4>Pointer</h4>

<p>The primary use of the mouse in iTerm2 is to select text, and (by default) text is copied to the clipboard immediately upon being selected. You can click and drag to perform a normal selection. Double-clicking selects a whole word. Triple-clicking selects an entire line. Quadruple-clicking performs a "smart select", matching recognized strings such as URLs and email addresses. You can add custom pointer actions in Preferences > Pointer. I recommend using three-finger tap for smart selection, but you must ensure that <em>System Preferences > Trackpad</em> does not have any other action already assigned to three-finger tap.</p>

<p>If you hold shift while clicking the existing selection is extended. In fact, you can single click in one location and shift click in an other location to make a selection: no dragging needed.</p>

<p>If you hold cmd while dragging it will create a noncontinguous selection.</p>

<p>If you hold cmd and click on a URL it will be opened. If you hold cmd and click on a filename, it will be opened. There is special support for MacVim, TextMate, and BBEdit when you cmd-click on a text file's name: if it is followed by a colon and line number, the file will be opened at that line number. The current directory is tracked if you have your shell prompt set the window title, <a href="http://www.faqs.org/docs/Linux-mini/Xterm-Title.html#toc4">as described here</a>, or if you have <a href="shell_integration.html">Shell Integration</a> installed.</p>

<p>If you hold cmd you can drag and drop selected text.</p>

<p>If you hold cmd and option while selecting, a rectangular selection will be made.</p>

<p>If mouse reporting is enabled (in Preferences > Profile > Terminal) and the currently running terminal application is using it, pressing option will temporarily disable it so you can make a selection.</p>

<p>If you hold the control key and click, that simulates a right click. If you'd prefer to send this combination to applications using mouse reporting, check "<sup>-Click</sup> reported to apps, does not appear in menu" in Preferences > Pointer.</p>

<p>Right clicking on a number shows its conversion to or from hex, or if it looks like a unix timestamp its representation in local time will be shown.</p>

<p>Moving the mouse's scroll wheel scrolls up and down. You can configure it to send arrow keys in interactive programs by turning on Preferences > Advanced > Scroll wheel sends arrow keys when in alternate screen mode, but it will only work if <strong>Preferences > Profiles > Terminal > Disable save/restore alternate screen</strong> is turned off.</p>

<p>A three-finger swipe left or right on a trackpad (if configured to "navigate") will select an adjacent tab.</p>

<p>Middle clicking on a tab (if your pointing device has a middle button) closes it.</p>

<p>Hold Control while resizing a window to temporarily disable snap-to-grid. You can permanently disable snap-to-grid in Prefs > Advanced > Terminal windows resize smoothly.</p>

<h4>Keyboard</h4>

<p>Every aspect of the keyboard can be configured in iTerm2. These keystrokes may be useful to remember:</p>

<ul>
<li>Cmd+left arrow, Cmd+right arrow navigates among tabs. So does Cmd-{ and Cmd-}.
</li>
<li>Cmd+number navigates directly to a tab.</li>
<li>Cmd+Option+Number navigates directly to a window.</li>
<li>Cmd+Option+Arrow keys navigate among split panes.</li>
<li>Cmd+] and Cmd+[ navigates among split panes in order of use.</li>
</ul>


<p>You can configure any key combination to perform any action in two places: in Preferences > Keys, you can define global key shortcuts that affect all profiles. In Preferences > Profiles > Keys, you can define key shortcuts that affect only a single profile.</p>

<p>You can remap modifiers like Option and Cmd within iTerm2. Some users find that pressing Option frequently is uncomfortable, and configure iTerm2 to swap the function of the Option and Cmd keys. This is done in Preferences > Keys under Remap Modifier Keys. If there is some key combination that you don't want to be affected by this change (such as Cmd-tab) add a new global shortcut key with the action Do Not Remap.</p>

<p>iTerm2 allows you to define a global hotkey. This is a single keystroke that iTerm2 listens for even when another application has keyboard focus. When it is pressed, iTerm2 comes to the front. Press it again, and iTerm2 goes away. You can choose to bind the hotkey to a single dedicated window. This feature is similar to other programs like Visor, Guake, and Yakuake.</p>

<h4>Context menus</h4>

<p>By right-clicking in a session a context menu opens. You can use it to open a new session, perform various actions on selected text, or access frequently used features to affect the clicked-on session.</p>

<h4>Profiles</h4>

<p>Many settings are stored in profiles. A profile is a named collection of settings, and you can have as many of them as you like. Most users only have one profile, but if you find that you often connect to different servers, they may be useful for you. A key feature of a profile is that you can associate a command with it that is run when it begins. For instance, if you often ssh to a particular host, you could create a profile with the command "ssh example.com" to automate that process.</p>

<p><a name="documentation-menu-items.html"></a></p>

<hr>


<h2>Menu Items</h2>

<h3>iTerm2 Menu</h3>

<h4>iTerm2 > Secure Keyboard Entry</h4>

<p>When this is enabled, the operating system will prevent other programs running on your computer from being able to see what you are typing. If you're concerned that untrusted programs might try to steal your passwords, you can turn this on, but it may disable global hotkeys in other programs.</p>

<h4>iTerm2 > Show Tip of the Day</h4>

<p>When you start using iTerm2 it will offer to show you a daily tip describing a feature. You can show a tip immediately by selecting this item.</p>

<h4>iTerm2 > Check for Updates</h4>

<p>Checks to see if a new version of iTerm2 is available. If Preferences > General > Prompt for test-release updates is turned on then this includes beta versions; otherwise only stable versions are downloaded.</p>

<h4>iTerm2 > Toggle Debug Logging</h4>

<p>This saves helpful debugging information in memory. When it is toggled off it is saved to /tmp/debuglog.txt.</p>

<h4>iTerm2 > Install Shell Integration</h4>

<p>Runs a shell script that modifies your .bash_profile (or other startup script) and enables the <a href="/shell_integration.html">Shell Integration</a> features.</p>

<hr/>


<h3>Shell Menu</h3>

<h4>Shell > New Tab with Current Profile</h4>

<p>This creates a new tab using the same profile as the current session rather than the default profile.</p>

<h4>Shell > New Window/Tab</h4>

<p>This creates a new window or tab with the default profile. If the current session is a tmux integration session, then you will be prompted for whether to create a local or tmux session.</p>

<h4>Shell > Duplicate Tab</h4>

<p>Creates another tab with the same arrangement of split panes, profile, etc.</p>

<h4>Shell > Split Vertically/Horizontally</h4>

<p>These menu items allow you to divide a tab into two or more split panes. The panes can be adjusted by dragging the line that divides them. They will use the default profile.</p>

<h4>Shell > Split Vertically/Horizontally with Current Profile</h4>

<p>These menu items allow you to divide a tab into two or more split panes. The panes can be adjusted by dragging the line that divides them. They will use the profile of the current session.</p>

<h4>Shell > Restart Session</h4>

<p>After a session ends (e.g., because the shell exits) this menu item becomes enabled. It will re-run your profile's command in the same viewport as the terminated session.</p>

<h4>Shell > Broadcast Input > ...</h4>

<p>These options allow you to send keyboard input to more than one session. Be careful.</p>

<h4>Shell > Run/Stop Coprocess</h4>

<p>Allows you to start and stop a coprocess linked to the current session. <a href="/documentation-coprocesses.html">Learn more about coprocesses</a>.</p>

<h4>Shell > tmux > ...</h4>

<p>These commands let you interact with the tmux integration. The tmux dashboard is a view that lets you see all your tmux sessions and windows at a glance, adjust which are visible, rename them, and change the current tmux session.</p>

<h4>Shell > Log > Start/Stop</h4>

<p>Logging saves all input received in a session to a file on disk.</p>

<hr/>


<h3>Edit Menu</h3>

<h4>Edit > Copy (With Styles)</h4>

<p>Hold down Option to turn Copy into Copy With Styles, which includes fonts and color information in the copied text.</p>

<h4>Edit > Undo Close Session/Tab/Window</h4>

<p>After you close a session, tab, or window then you have five seconds to undo it. The amount of time is configurable in PReferences > Profiles > Session.</p>

<h4>Edit > Paste Special > Advanced Paste</h4>

<p>This opens the Advanced Paste window which lets you select a string from the pasteboard in recent history, select different representations of the current pasteboard, and modify the string before pasting it. You can modify it by appling a regex substitution, using various built-in modifiers (such as base-64 encoding), or edit it by hand.</p>

<h4>Edit > Paste Special > Paste Selection</h4>

<p>Pastes the currently selected text (which may differ from the text in the pasteboard).</p>

<h4>Edit  > Paste Special > Paste File Base64-Encoded</h4>

<p>If there is a file on the pasteboard then this this is enabled. When invoked, it base64-encodes the file and pastes the encoded value.</p>

<h4>Edit > Paste Special > Paste Escaping Special Characters</h4>

<p>"Paste Escaping Special Characters" pastes the current string in the clipboard, but places a backslash before spaces and backslashes.</p>

<h4>Edit > Paste Special > Paste Slowly</h4>

<p>"Paste Slowly" pastes the current string in the clipboard, but it doesn't send the whole string at once. It is sent in batches of 16 bytes with a 125ms delay between batches.</p>

<h4>Edit > Paste Special > Paste Faster/Slower</h4>

<p>Adjusts the speed of pasting to be faster or slower.</p>

<h4>Edit > Paste Special > Paste Slowly Faster/Slower</h4>

<p>Adjusts the speed of slow pasting to be faster or slower. You must hold down option for this menu item to be visible.</p>

<h4>Edit > Paste Special > Warn Before Multi-Line Paste</h4>

<p>When enabled, you'll be warned before pasting more than one line.</p>

<h4>Edit > Selection Respects Soft Boundaries</h4>

<p>When enabled, vertical lines of pipe characters <code>|</code> will be interpreted as pane dividers (as in vim or emacs) and selection will wrap at them.</p>

<h4>Edit > Open Autocomplete...</h4>

<p>Shows the autocomplete window, which offers to finish typing a word that you've begun. <a href="documentation-highlights.html">Learn more about autocomplete on highlights page</a>.</p>

<h4>Edit > Edit Current Session</h4>

<p>This opens a window that lets you change the settings of the current session without affecting any other sessions. Changes made in this panel will not be overridden by subsequent changes to the profile. Settings <em>not</em> cahnged in this panel will be affected by changes to the profile.</p>

<h4>Edit > Open Command History...</h4>

<p>If you use <a href="shell_integration.html">Shell Integration</a> then Open Command History presents a list of recently used commands to select from.</p>

<h4>Edit > Open Recent Directories...</h4>

<p>If you use <a href="shell_integration.html">Shell Integration</a> then Open Recent Directories presents a list of recently used directories to select from.</p>

<h4>Edit > Open Paste History...</h4>

<p>"Open Paste History" opens a window showing up to the last 20 values that were copied or pasted in iTerm2. You can search its contents by typing a (non-necessarily-consecutive) subsequence of characters that appear in the value. You can use arrow keys and enter to make a selection, or you can click on an item to choose it, and it will be pasted. If you enable the Save copy/pate history to disk preference then these values will persist across sessions of iTerm2.</p>

<h4>Edit > Find > Fine URLs</h4>

<p>Searches the current session for URLish looking strings.</p>

<h4>Edit > Marks and Annotations > Set Mark</h4>

<p>Records the current scroll position. Use Edit > Jump to Mark to restore the scroll position.</p>

<h4>Edit > Marks and Annotations > Add Annotation at Cursor</h4>

<p>Adds an annotation to the word beginning at the cursor. An annotation is a scratchpad for you to write notes about a chunk of text in your history.</p>

<h4>Edit > Marks and Annotations > Alerts > Alert on Next Mark</h4>

<p>When a mark is set (typically by <a href="shell_integration.html">Shell Integration</a> when the currently running shell command terminates) then show an alert.</p>

<hr/>


<h3>View Menu</h3>

<h4>View > Show Tabs in Fullscreen</h4>

<p>If enabled, tabs are shown in fullscreen windows.</p>

<h4>View > Use Transparency</h4>

<p>This toggles transparency. It only has an effect if you have configured your session to be transparent under Preferences > Profiles > Window > Transparency. When Full Screen mode is entered, transparency is turned off by default, but you can select this menu item to re-enable it.</p>

<h4>View > Find Cursor</h4>

<p>Reveals the current cursor position.</p>

<h4>View > Zoom In on Selection/Zoom Out</h4>

<p>When a selection is present this is enabled. Zooming on a selection removes all other text from the session and lets you focus on just the zoomed-in-on text. Pressing escape will invoke Zoom Out when you are in the Zoom In state.</p>

<h4>View > Show Cursor Guide</h4>

<p>Toggles the visiblity of the cursor guide which is a horizontal rule showing the location of the cursor.</p>

<h4>View > Show Timestamps</h4>

<p>Indicate the time of last modification of each line on the screen.</p>

<h4>View > Show Annotations</h4>

<p>Toggles the visibility of annotations.</p>

<h4>View > Auto Command Completion</h4>

<p>Automatically shows a window with command completion suggestions as you type. Only usable when you have command history built up with <a href="shell_integration.html">Shell Integration</a>.</p>

<h4>View > Open Quickly</h4>

<p>If you have lots of sessions you can quickly find the one you're looking for with Open Quickly. Select the View > Open Quickly menu item (cmd-shift-O) and then enter a search query. You can search by tab title, command name, host name, user name, profile name, directory name, badge label, and more. Queries are scored according to relevance and sorted by score. Open Quickly also lets you create new tabs, change the current session's profile, and open arrangements. If you start your query with a / then that gives you a shortcut to various commands. /a followed by an arrangement name restores the arrangement. /f restricts the query to existing sessions, excluding options to open new tabs, etc. /p restrics the query to profile names to switch the current session to. /t restricts the results to "open new tab" for matching profile names.</p>

<h4>View > Maximize Active Pane</h4>

<p>When there are split panes present, this toggles whether a given pane expands to fill the tab. When a maximized pane is present, the tab will be inscribed with a dotted outline.</p>

<h4>View > Start Instant Replay</h4>

<p>Stepping through time allows you to see what was on the screen at a previous time. This is different than going back through the scrollback buffer, as interactive programs sometimes overwrite the screen contents without having them scroll back. Once in this mode, you can use the left and right arrow keys to step back and forward, respectively. The "esc" key exits this mode, as does clicking the close button in the bar that appears on the bottom. You can adjust the amount of memory dedicated to this feature in Preferences > Instant Replay uses xx MB per session. The more memory you assign, the further back in time you can step.</p>

<h4>View > Tab Color</h4>

<p>Allows you to select a tint color for the tab, to make it easier to distinguish. You can also change the tab color in Profiles > Preferences > Colors.</p>

<hr/>


<h3>Profiles Menu</h3>

<h4>Profiles > Open Profiles...</h4>

<p>This opens the "Profiles Window" which allows you to create new windows, tabs, or panes from one or more profiles. You can perform a search by entering text in the search field. Profile names and tags are searched, and the listed profiles are filtered as you type. You can use the up and down arrow keys to make a selection. Pressing enter will open a new tab, while shift-enter will open a new window. You can make multiple selections by holding down shift or cmd and clicking on profiles. The "New Tabs in New Window" button is enabled only when more than one profile is selected: it will open a new window and create a new tab for each profile selected.</p>

<hr/>


<h3>Scripts Menu</h3>

<p>If you have scripts located in <code>$HOME/Library/Application Support/iTerm/Scripts</code> they'll be added to this menu. The menu will not exist if there are no scripts.</p>

<hr/>


<h3>Toolbelt Menu</h3>

<h4>Toolbelt > Set Default Width</h4>

<p>Saves the current window's toolbelt width as the default width for new windows' toolbelts.</p>

<h4>Tolbelt > Captured Output</h4>

<p>This toggles the visibilty of the Captured Output tool. It shows captured output located with the Capture Output trigger. See <a href="captured_output.html">Captured Output</a> for more information.</p>

<h4>Toolbelt > Command History</h4>

<p>This toggles the visibility of the Command History tool. It shows recently used commands. You must install <a href="shell_integration.html">Shell Integration</a> for this to know your command history.</p>

<h4>Toolbelt > Show Toolbelt</h4>

<p>This toggles the visibility of the Toolbelt on the right side of all windows.</p>

<h4>Toolbelt > Jobs</h4>

<p>This toggles the visibility of the Jobs tool, which shows the running jobs in the current session, and allows you to send them signals.</p>

<h4>Toolbelt > Notes</h4>

<p>This toggles the visibility of the Notes tool, which provides a freeform scratchpad in the toolbelt.</p>

<h4>Toolbelt > Paste History</h4>

<p>This toggles the visibility of the Paste History tool, which shows recently pasted strings in the toolbelt.</p>

<h4>Toolbelt > Profiles</h4>

<p>This toggles the visibility of the Profiles tool, which lets you select profiles to open new windows, tabs, and split panes.</p>

<h4>Toolbelt > Recent Directories</h4>

<p>This toggles the visibility of the Recent Directories tool. It shows recently used directories sorted by a combination of recency and frequency of use. You must install <a href="shell_integration.html">Shell Integration</a> for this to know your directory history. You can right click a directory to open a context menu that allows you to "start" a directory. This keeps it pinned at the bottom of the list so it's easy to find.</p>

<hr/>


<h3>Window Menu</h3>

<h4>Window > Exposé All Tabs</h4>

<p>All iTerm2 tabs will be shown tiled on the main screen. You can mouse over a tab to see it larger, and clicking on it will restore the windows and select that tab and bring its window to the front. You can search the contents of all tabs by typing in the search field that appears on the left. Making a selection from the results below it will highlight the tab that contains that text. This is useful when you have many tabs open and can't find the one you're looking for.</p>

<h4>Window > Save/Restore Window Arrangement</h4>

<p>The current state and positions of windows, tabs, and spit panes is recorded and saved to disk with Save Window Arrangement. Restore Window Arrangement opens a new collection of windows having the saved state. You can automatically restore the arrangement in Preferences > General > Open saved window arrangement.</p>

<h4>Window > Password Manager</h4>

<p>Opens the password manager.</p>

<p><a name="documentation-preferences.html"></a></p>

<hr>


<h2>Preferences</h2>

<h3>General</h3>

<hr>


<h4>Startup</h4>

<p>The first dropdown box lets you select how windows will be opened when iTerm2 is launched. Most users will want <em>Use System Window Restoration Setting</em> as it works best with <a href="restoration.html">Session Restoration</a>. Users who exclusively use the Hotkey Window may prefer <em>Don't Open Any Windows</em>. If you have a default window arrangement saved then <em>Open Default Window Arrangement</em> will be available.</p>

<h4>Open profiles window</h4>

<p>If selected, the Profiles Window will automatically open when iTerm2 is started.</p>

<h4>Quit when all windows are closed</h4>

<p>If selected, iTerm2 will automatically quit when its last terminal window is closed.</p>

<h4>Confirm closing multiple sessions</h4>

<p>If selected, commands that close one session will not be confirmed, but commands that close multiple sessions (such as clicking the red button on a window with two or more tabs) will be confirmed with an alert box.</p>

<h4>Confirm Quit iTerm2 Command</h4>

<p>If selected, the Quit iTerm2 (cmd-Q) command will be confirmed if any terminal windows are open.</p>

<h4>Instant Replay Uses X MB per Session</h4>

<p>This setting specifies the maximum amount of memory allocated to instant replay for each tab or split pane. More memory means instant replay is able to go farther back into the past. You can enter instant replay with View > Step Back in Time.</p>

<h4>Save copy/paste and command history to disk</h4>

<p>If selected, every time text is copied or pasted in iTerm2 it will be saved to disk. The last 20 values are recorded. They can be accessed with Edit > Open Paste History.... If you use <a href="shell_integration.html">Shell Integration</a> then when this is enabled your command history, directory history, and remote hostname and usernames will also be saved to disk. Unchecking this will erase all of the saved information.</p>

<h4>Add Bonjour hosts to profiles</h4>

<p>If selected, all Bonjour hosts on the local network have a profile created for them as long as they're around.</p>

<h4>Check for updates automatically</h4>

<p>If enabled, iTerm2 will periodically check if a new version of iTerm2 exists, and if so it will prompt you to download and upgrade.</p>

<h4>Prompt for test-release updates</h4>

<p>If enabled, iTerm2 will periodically check if a new unstable version of iTerm2 exists, and if so it will prompt you to download and upgrade.</p>

<h4>Load preferences from a custom folder or URL:</h4>

<p>If enabled, iTerm2 will load its preferences from the specified folder or URL. After setting this, you'll be prompted when you quit iTerm2 if you'd like to save changes to the folder.</p>

<h4>Save changes to folder when iTerm2 quits</h4>

<p>When you've turned on <em>Load preferences from a custom folder</em> and this is on then any changes you make to your settings will be written to the custom folder.</p>

<h4>Copy to clipboard on selection</h4>

<p>If enabled, text is copied to the clipboard immediately upon selection. If not selected, you must select Edit > Copy to copy it.</p>

<h4>Copied text includes trailing newline</h4>

<p>If enabled, a terminal newline will be copied to the pasteboard when the selection includes one; otherwise, no selection will ever include a terminal newline.</p>

<h4>Applications in terminal may access clipboard</h4>

<p>If enabled, clipboard access will be granted via escape code to programs running in iTerm2. They will be able to retrieve and set the contents of the system pasteboard.</p>

<h4>Characters considered part of a word for selection</h4>

<p>When you double-click in the terminal window, a "word" is selected. A word is defined as a string delimited by characters of a different class. The classes of characters are whitespace, word characters, and non-word characters. The characters in this field define the set of non-word characters.</p>

<h4>Smart window placement</h4>

<p>If enabled, new windows will be opened where they least overlap existing windows.</p>

<h4>Adjust window when changing font size</h4>

<p>If enabled, a change to a session's font will cause the window to grow or shrink.</p>

<h4>Zoom button maximizes vertically only</h4>

<p>If enabled, the green "Zoom" button expands a terminal window vertically but does not affect its width. This can be overridden by holding down shift while clicking the zoom button.</p>

<h4>Native full screen windows</h4>

<p>If enabled, fullscreen windows will animate into a special desktop, as is typical in macOS 10.7 and later. If disabled, fullscreen windows will instantly go fullscreen without changing desktops.</p>

<h4>tmux Integration</h4>

<p>The first dropdown box in the <strong>tmux Integration</strong> section allows you to define how tmux windows should be mapped to native constructs. When attaching to a new tmux session with the tmux integration, tmux windows not seen by iTerm2 before will open in either new windows or tabs, as specified by this preference.</p>

<h4>Open dashboard if there are more than...tmux windows</h4>

<p>When attaching to a tmux session with the tmux integration, windows are normally opened automatically. If there are too many of them, then the tmux dashboard is opened instead.</p>

<h4>Automatically hide the tmux client session after connecting</h4>

<p>When the tmux integration is entered by running tmux -CC, the window in which that command was run will miniaturize into the dock if this option is enabled.</p>

<h3>Appearance</h3>

<hr>


<h4>Tab Bar Location</h4>

<p>Defines whether tabs appear at the top, bottom, or left side of your windows.
Select from a list of tab looks.</p>

<h4>Theme</h4>

<p>Allows you to select the theme. Light and Dark options are available, along with high-contrast versions that are easier to read.</p>

<h4>Show tab bar even when there is only one tab</h4>

<p>If selected, the tab bar will remain visible when a window contains exactly one tab.</p>

<h4>Show tab numbers</h4>

<p>If selected, tabs will indicate their keyboard shortcut.</p>

<h4>Show tab close buttons</h4>

<p>If selected, tabs show close buttons. If not selected, the close buttons only appear when the mouse hovers over the tab.</p>

<h4>Show tab activity indicators</h4>

<p>If selected, the activity indicator in each tab will be displayed when new output is recevied and the tab is not selected.</p>

<h4>Flash tab bar when switching tabs in fullscreen</h4>

<p>If selected, the tab bar will show briefly when switching tabs in a fullscreen window. It will also show briefly when the number of tabs changes.</p>

<h4>Show tab bar in fullscreen</h4>

<p>If selected the tab bar will be visible in fullscreen windows.</p>

<h4>Show per-pane title bar with split panes</h4>

<p>When a tab has split panes, this option controls whether each split pane will have its own title bar.</p>

<h4>Auto-hide menu bar in non-native fullscreen</h4>

<p>When native fullscreen mode is disabled (in Prefs > General), this option is available. If you'd like the menu bar to remain visible when a fullscreen window is present on a screen with a menu bar, turn this on.</p>

<h4>Show window number</h4>

<p>If selected, window titles include the window number. You can navigate to a window by pressing cmd-opt-N where N is the window number.</p>

<h4>Show current job name</h4>

<p>If selected, tab and window titles will show the name of the foreground job.</p>

<h4>Show profile name</h4>

<p>If selected, tab and window titles will show profile names.</p>

<h4>Dimming affects only text, not background</h4>

<p>When a window or pane is dimmed, this option controls whether the background color is dimmed or only the text colors.</p>

<h4>Dimming amount</h4>

<p>This slider controls how much to dim inactive windows or panes.</p>

<h4>Dim inactive split panes</h4>

<p>If selected, split panes that do not have keyboard focus will be slightly dimmed.</p>

<h4>Dim background windows</h4>

<p>If enabled, windows in the background (that is, those not receiving keyboard input) are dimmed according to the above settings.</p>

<h4>Show border around window</h4>

<p>If selected, a 1-pixel border will be shown around the edges of terminal windows.</p>

<h4>Hide scrollbars</h4>

<p>If selected, scrollbars will be hidden in terminal windows.</p>

<h4>Disable transparency for fullscreen windows by default</h4>

<p>If enabled, entering fullscreen mode will automatically turn off transparency for that window.</p>

<h3>Profiles > General</h3>

<hr>


<h4>Name</h4>

<p>Gives the name of the profile which is shown in menus, preferences, and the profiles window.</p>

<h4>Shortcut key</h4>

<p>This shortcut can be used to open a new window or tab. By default, it opens a new tab, but if you hold down the option key while pressing the shortcut, a new window will be opened instead.</p>

<h4>Tags</h4>

<p>Tags are a collection of words or phrases that annotate a profile. When you search your profiles (for instance, in the profiles window), the tag names are searched in addition to the profile name. If a tag name contains a slash that defines a hierarchy of menu items in the <strong>Profiles</strong> menu.</p>

<h4>Badge</h4>

<p>The badge is a large label visible in the top right of a terminal session behind its text. For more information see <a href="badges.html">Badges</a>.</p>

<h4>Command</h4>

<p>This is the command that is executed when a new session with the profile is created. If <em>login shell</em> is chosen, then <code>login</code> is invoked. You can put special terms surrounded by $$ in this field (example: $$USERNAME$$). When a new session is created, you will be prompted to enter a value for each such term. See the description of URL Schemes below for details about the special "$$" value that can go in this field.</p>

<h4>Send Text at Start</h4>

<p>This text will be sent when a session begins. If it is not empty then a newline will be sent afterwards. It does not accept any special characters or require any escaping.</p>

<h4>Working directory</h4>

<p>Normally, new sessions begin in your home directory. You can choose to open new sessions in the same directory as the current session (but only when creating a new tab), or you can specify a starting directory.</p>

<h4>URL Schemes</h4>

<p>You can configure a profile to handle a URL scheme, such as ssh. When a hyperlink is clicked on with that scheme, a new tab is opened with the selected profile. It is recommended that you set the command to "$$", in which case an ssh command line will be auto-generated. For other schemes, you can uses these variables in the Command field and they will be replaced with the appropriate part of the URL:</p>

<ul>
      <li>$$URL$$ The complete url</li>
      <li>$$HOST$$ The host portion of a url like scheme://host/</li>
      <li>$$USER$$ The username portion of a url like scheme://user@host/</li>
      <li>$$PASSWORD$$ The password portion of a url like scheme://user:password@host/</li>
      <li>$$PORT$$ The port number of a url like scheme://host:port/</li>
      <li>$$PATH$$ The path portion of a url like scheme://host/path</li>
      <li>$$RES$$ The portion of a url following the scheme.</li>
</ul>


<h3>Profiles > Colors</h3>

<hr>


<p>Clicking on any of the color wells opens a color picker that lets you change the setting for the selected color. iTerm2 has a custom color picker. If you don't like it you can revert to the system color picker by clicking the rectangular icon to the right of the eyedropper.</p>

<h4>Smart cursor color</h4>

<p>When selected, a block cursor will be displayed in reverse video. If this would result in confusion, then a different color is chosen that will be most visible given the surrounding cells' background colors.</p>

<h4>Minimum contrast</h4>

<p>If text is displayed against a similar background color, the minimum contrast setting will move the text color towards black or towards white to ensure some minimum level of visibility. Setting this slider all the way to maximum will make all text black and white.</p>

<h4>Cursor Boost</h4>

<p>Cursor Boost dims all colors other than the cursor colors to make the cursor stand out more.</p>

<h4>Tab Color</h4>

<p>If enabled, this color will decorate the tab control. Tabs indicate the color of their current session if there is more than one split pane.</p>

<h4>Cursor Guide</h4>

<p>The cursor guide is a horizontal rule that indicates the vertical position of the cursor. You can adjust its color, including alpha value, to make it more visible against your background color.</p>

<h4>Color Presets...</h4>

<p>iTerm2 ships with some color presets, which you may load from this popup menu. You can import and export color presets to files with the extension "itermcolors". There is an online color gallery where users may share color presets, and a link to it is provided in this menu. When importing a color preset, the name it is assigned is based on the filename imported.</p>

<h3>Profiles > Text</h3>

<hr>


<h4>Cursor</h4>

<p>This lets you select a cursor shape.</p>

<h4>Blinking cursor</h4>

<p>If checked, the cursor will blink slowly to improve visibility.</p>

<h4>Draw bold text in bold font</h4>

<p>If selected, bold text will be drawn in a bold version of the selected font. If the font does not have a bold version, then a bold appearance is simulated by "double striking" the text: that is, drawing it twice, shifting it one pixel horizontally the second time.</p>

<h4>Draw bold text in bright colors</h4>

<p>If selected, bold text will be drawn in a bright version of its color.</p>

<h4>Blinking text allowed</h4>

<p>If selected, text with the blink attribute set will actually blink. Oh, the humanity.</p>

<h4>Italic text allowed</h4>

<p>If selected, text with the italic attribute set will be rendered in italics. The font you select must have an italic face.</p>

<h4>Use thin strokes for anti-aliased text</h4>

<p>Anti-aliased text will be drawn with thinner strokes by default on Retina displays. The effect may be more or less visible depending on your particular hardware and OS version. Some people prefer the older, heavier strokes, so you may customize the setting here.</p>

<h4>Regular font</h4>

<p>ASCII text (latin letters, numbers, and some symbols) will be drawn using this font. Select "Anti-aliased" to draw the text with smooth edges.</p>

<h4>Non-ASCII font</h4>

<p>All non-ASCII text (many accented Latin letters, non-Latin text, less-common symbols, and thousands of miscellaneous unicode characters) will be drawn with this font. It is recommended that you use the same point size for both regular and non-ASCII fonts. Select "Anti-aliased" to draw the text with smooth edges.</p>

<h4>Treat ambiguous-width characters as double width</h4>

<p>Some characters (e.g., Chinese ideograms) are double-width, and take two cells to display. Other characters (e.g., Latin letters) are single width and take only one cell to display. There is another category of characters known as "ambiguous width". One example of ambiguous-width characters are Greek letters. Depending on your application, you may prefer to display them as double-width or single-width. If most of the text you deal with is double-width, then you should enable this setting as it will help things to line up correctly in that context.</p>

<h4>Use HFS+ Unicode Normalization</h4>

<p>Use HFS+ normalization instead of NFC. This helps preserve the fullwidth attribute of composed characters.</p>

<h3>Profiles > Window</h3>

<hr>


<h4>Transparency</h4>

<p>This sets the transparency of the window background. It can be temporarily disabled with View > Use Transparency.</p>

<h4>Keep background colors opaque</h4>

<p>If selected, non-default background colors will be opaque.</p>

<h4>Blur</h4>

<p>If selected, the window background is blurred provided the background has some transparency. Selecting a large radius will blur the background more, but (especially on Retina displays) comes with a performance penalty.</p>

<h4>Rows/Columns</h4>

<p>When creating a new window with this profile, it will be created with this many rows and columns.</p>

<h4>Hide after opening</h4>

<p>If enabled, a window created with this profile will immediately miniaturize after its creation.</p>

<h4>Open Toolbelt</h4>

<p>If enabled, a window created with this profile will feature an open toolbelt.</p>

<h4>Background Image</h4>

<p>This allows you to select an image to display behind the terminal's text. If Tile image is selected, then the image will be shown at its actual size and tessellated; otherwise, it will be stretched to fit the whole pane. The blending slider determines how strongly the image dominates over the text's background color.</p>

<h4>Style</h4>

<p>This defines the window style. Bottom- and Top-of-screen windows will disregard the columns setting. Left-of-screen windows will disregard the rows setting. Full-screen windows only respect the rows and columns setting when full-screen mode is exited. The full-width/full-height styles ignore the column or rows setting, respectively, to use all the available space except what is reserved by the system.</p>

<h4>Screen</h4>

<p>If you have more than one screen connected, this lets you select the screen on which a new window should open. It is particularly useful for fullscreen and top-of-screen window styles. The <em>Screen with Cursor</em> option affects the initial screen of the window, but it won't follow your cursor from screen to screen.</p>

<h4>Space</h4>

<p>If you have enabled Spaces (or your OS uses Desktops instead of spaces) and have set Spaces/Mission Control to use Control+Number to switch spaces/desktops, then you can use this setting to select the initial space/desktop to open a new window using this profile.</p>

<h4>If showing profile name in tab title, keep it when the title is changed</h4>

<p>You can specify that profile names are shown in window and tab titles under Preferences > Appearance > Show Profile Name. If that is not set, then this option is irrelevant. When in use, a host may send an escape code that changes the window title. This setting causes the profile name to be preserved in that session-set title.</p>

<h4>Force this profile to open in a new window, never in a tab</h4>

<p>If you ask for a new tab with this profile, it will just open in a window instead. This is for people who hate tabs.</p>

<h3>Profiles > Terminal</h3>

<hr>


<h4>Scrollback lines</h4>

<p>The number of lines of scrollback buffer to keep above the visible part of the screen. Unlimited scrollback will allow it to grow indefinitely, possibly using all available memory.</p>

<h4>Save lines to scrollback when an app status bar is present</h4>

<p>Some programs (such as vim or tmux) keep a status bar at the bottom of the screen. For some applications (like vim) it is undesirable to save lines to the scrollback buffer when the application scrolls. For others (like tmux) you may want to save scrolled-off lines into the scrollback buffer. When this setting is enabled, lines scrolled off the top of the screen in the presence of a status bar are added to the scrollback buffer. The screen is considered to have a status bar if it has a scroll region whose top is the first line of the screen and whose bottom is above the bottom of the screen.</p>

<h4>Save lines to scrollback in alternate screen mode</h4>

<p>When in alternate screen mode, lines that scroll off the top of the screen will be saved to the scrollback buffer only if this option is enabled.</p>

<h4>Character encoding</h4>

<p>The encoding to send and receive in. For most people, "Unicode (UTF-8)" is the right choice.</p>

<h4>Report terminal type</h4>

<p>The TERM variable will be set to this value by default. If xterm-256color is selected and your system is missing the terminfo file, you will be prompted to install it when you open a new session.</p>

<h4>ENQ answer back</h4>

<p>Text to send when the ENQ sequence is received. Not normally used.</p>

<h4>Enable mouse reporting</h4>

<p>If selected, applications may choose to receive information about the mouse. This can be temporarily disabled by holding down Option.</p>

<h4>Terminal may report window title</h4>

<p>Programs running in a terminal may send an escape code to request the current window title. You may disable this feature by enabling this option. It should be disabled if you're communicating with an untrusted party, as there are possible injection attacks.</p>

<h4>Terminal may set tab/window title</h4>

<p>If enabled the terminal may set the window or tab title with an escape sequence.</p>

<h4>Disable session-initiated printing</h4>

<p>If enabled, escape codes that initiate printing will be ignored.</p>

<h4>Disable save/restore alternate screen</h4>

<p>Some programs (such as vim, tmux, and less) switch into a so-called "alternate screen". A characteristic of this behavior is that when these programs terminate the screen's contents are restored to their state from before the program was run. If this option is selected, alternate screen mode is disabled and the screen cannot be restored by an application.</p>

<h4>Disable session-initiated window resizing</h4>

<p>If the host sends an escape code to resize the window, it will be ignored if this option is selected..</p>

<h4>Silence bell</h4>

<p>If selected, the bell (control-G) will not make an audible sound.</p>

<h4>Send Growl/Notification Center alerts</h4>

<p>If selectedinstalled, iTerm2 will post a notifications when sessions receive output, become idle, ring the bell, close, or get a proprietary escape sequence to post a notification. If Growl is installed it is preferred over Notification Center.</p>

<h4>Filter Alerts</h4>

<p>This button opens a panel that lets you customize which notifications will be posted.</p>

<h4>Flash visual bell</h4>

<p>If selected, a bell graphic will be flashed when the bell character is received.</p>

<h4>Show bell icon in tabs</h4>

<p>If selected, tabs will indicate that a bell has rung by displaying a bell graphic.</p>

<h4>Set locale variables automatically</h4>

<p>If enabled, LANG and LC_CTYPE environment variables will be set based on your machine's language settings.</p>

<h4>Insert newline before start of command prompt if needed</h4>

<p>If you have <a href="shell_integration.html">Shell Integration</a> installed and a command's output does not end in a newline, this setting will ensure your prompt does not begin in the middle of the line.</p>

<h4>Show mark indicators</h4>

<p>If you have <a href="shell_integration.html">Shell Integration</a> and this setting is selected then a blue or red arrow appears next to each shell prompt. Turn this off to hide the arrow.</p>

<h3>Profiles > Session</h3>

<hr>


<h4>Automatically close a session when it ends</h4>

<p>If selected, a session's pane, tab, or window will automatically close when the session ends.</p>

<h4>"Undo" can revive a session that has been closed for up to X seconds</h4>

<p>When you close a session, window, or tab the shell is not terminated until X seconds pass. While that time period has not elapsed, <em>Undo</em> will reopen the session, tab, or window.</p>

<h4>Prompt before closing</h4>

<p>When a session will close, you can choose when to be prompted with a modal alert.</p>

<h4>Automatically log session input to files in:</h4>

<p>If enabled, every session's output will be logged to a file in the specified directory. File names are formatted as Date_Time.ProfileName.TerminalID.ProcessId.RandomNumber.log.</p>

<h4>When idle, send ASCII code X every Y seconds.</h4>

<p>If selected, the specified ASCII code "X" (a number from 0 to 255) will be transmitted every Y seconds while nothing is happening. Don't use this unless you know what you're doing as it can have unexpected consequences. Seriously, it's probably not what you want.</p>

<h4>Avoid repainting while cursor is hidden to reduce flicker while scrolling</h4>

<p>When selected, the screen will slightly delay redraws while the cursor is hidden. This improves the visual appearance of scrolling in many programs but might introduce noticeable delays for some users.</p>

<h3>Profiles > Keys</h3>

<hr>


<p>This panel shows key mappings. You can double-click on a mapping to edit it. When the "Keyboard Shortcut" field has focus, you should press the keystroke that you want to modify (even if it involves modifiers like Cmd). The following actions are available:</p>

<h4>Ignore</h4>

<p>The keypress will do nothing.</p>

<h4>Do not remap modifiers</h4>

<p>If modifier remapping is in effect (set under Preferences > Keys), it can be disabled for certain key combinations. When you choose this action, modifier remapping is temporarily disabled so you can press the key combination unremapped in the key field.</p>

<h4>Remap modifiers in iTerm2 only</h4>

<p>If modifier remapping is in effect (set under Preferences > Keys), it can be set to not affect other applications that may listen for global hotkeys. When you choose this action, modifier remapping is temporarily disabled so you can press the key combination unremapped in the key field.</p>

<h4>Split/New Window/Tab with Profile</h4>

<p>These actions allow you to create a new session with a specified profile when a key is pressed.</p>

<h4>Start Instant Replay</h4>

<p>This is equivalent to the menu item View > Start Instant Replay.</p>

<h4>Cycle Tabs Forward/Backward</h4>

<p>This implements tab switching the same way Cmd-Tab (or Cmd-Shift-Tab) switches windows, with the most-recently-used stack.</p>

<h4>Next/Previous Tab/Window/Pane</h4>

<p>These actions navigate among tabs, windows, and split panes.</p>

<h4>Move tab left/right</h4>

<p>Changes the tab's position in the order.</p>

<h4>Increase/Decrease Width/Height</h4>

<p>Changes the size of the current session.</p>

<h4>Scroll to End/Top/Up/Down</h4>

<p>These actions move through the scrollback buffer.</p>

<h4>Select Split Pane Above/Below/Left/Right</h4>

<p>These actions navigate split panes.</p>

<h4>Send ^? / ^H Backspace</h4>

<p>Modern systems use ^? for backspace, while some legacy systems use ^H.</p>

<h4>Send Escape Sequence</h4>

<p>This action allows you to enter some text that will be sent when the associated key is pressed. First, the ESC character is sent, and then the text you entered is sent. There are no special characters and no escaping is necessary.</p>

<h4>Send Hex Code</h4>

<p>This action allows you to enter a sequence of hex codes that will be sent. Each value should begin with "0x" followed by one or two hex digits (0-9, a-f, or A-F). Each code should be separated by a space. You can see a list of hex codes on http://asciitable.com/ in the "Hx" column.</p>

<h4>Send Text</h4>

<p>This action allows you to enter a text string that will be sent when the associated key is pressed. The following escape characters are supported: \n (newline), \e (escape), \a (bell), \t (tab).</p>

<h4>Send Text with "vim" Special Characters</h4>

<p>This action allows you to enter a text string that will be sent when the associated key is pressed. The following special sequences are supported, where the "." characters are placeholders: ... (three-digit octal number), .. (two-digit octal number; must be followed by non-digit), . (one-digit octal number; must be followed by non-digit), \x.. (two-digit hex number), \x. (one-digit hex number), \u.... (four-digit hex number), \b (backspace), \e (escape), \f (form feed), \n (newline), \r (carriage return), \t (tab), \ (backslash), \" (double quote), \&lt;C-.> (control key), \&lt;M-.> (meta key)</p>

<h4>Find Regular Expression</h4>

<p>Performs a search for a saved regular expression.</p>

<h4>Undo</h4>

<p>Invokes the Undo action. Could be used to undo closing a session/tab/window.</p>

<h4>Paste (from selection)</h4>

<p>Same as Edit > Paste and Edit > Paste Special > Paste Selection</p>

<h4>Toggle Fullscreen</h4>

<p>This action enters or exits full screen mode.</p>

<h4>Toggle Hotkey Hides When Focus Lost</h4>

<p>Toggles whether the hotkey window hides when it loses focus.</p>

<h4>Run Coprocess</h4>

<p>This action launches a Coprocess. <a href="documentation-coprocesses.html">Learn more about coprocesses</a>.</p>

<h4>Move Start/End of Selection Back/Forward</h4>

<p>Adjusts the range of selected text.</p>

<h4>Select Menu Item...</h4>

<p>This action allows you to enter the name of an iTerm2 menu item. It must be entered exactly the same as it appears in the menu. Ellipses can be typed with option-semicolon.</p>

<hr/>


<p>You can add a new keymapping by pressing "+". You can remove an existing mapping by selecting it and pressing "-". Three presets are provided: "Xterm defaults" is the normal key mappings, while "Xterm defaults with numeric keypad" disables the "application keypad" in favor of the numbers and symbols that the numeric keypad typically emits. "Terminal.app Compatibility" tries to emulate the way that Terminal.app sends keys by default.</p>

<h4>Left/Right Option Key Acts As</h4>

<p>It is common to use a modifier to send so-called "meta keys". For most users, selecting "+Esc" here is the right choice. The "Meta" option sets the high bit of the input character, and is not compatible with modern systems.</p>

<h4>Delete sends ^H</h4>

<p>If you are on a legacy system that does not accept ^? for backspace, select this and it will add a key mapping for you.</p>

<h3>Profiles > Advanced</h3>

<hr>


<h4>Triggers</h4>

<p>Triggers are actions that are performed when text matching a regular expression is received. Each trigger has a regular expression, which defines when it runs. It has an action, which defines what it performs, and it has an optional parameter, whose meaning depends on the action. When the parameter is textual, \0 is replaced with the entire match, and \1...\9 are replaced with match groups. Each trigger has a checkbox in the "Instant" column. Instant triggers run as soon as text matching the regular expression is matched; triggers that are not instant only match after the cursor moves off the current line (such as whena newline is received).</p>

<p>Full details can be found at <a href="documentation-triggers.html">Triggers</a>.</p>

<h4>Semantic History</h4>

<p>Semantic history is used to open a file when you Cmd-Click on it. The current working directory for each line in the terminal is tracked to help find files. If Semantic History is set to "Open with default app," then files are passed to the OS to be opened with whatever is associated. Alternatively, you can choose "Open URL..." to open a specific URL (with \1 replaced with the filename and \2 replaced with the line number, if applicable). If you choose "Open with editor..." then text files will be opened with the designated editor, while other files are opened with the default app for their file type. For more flexibility, choose "Run command..." and specify a command to execute. \1 will be replaced with the file name, \2 will be replaced with the line number (if applicable), \3 with text in the line prior to the click location, \4 with text in the line subsequent to the click location, and \5 for the working directory of the line clicked on. Finally, "Always run command..." is like "Run command...," but takes effect even if the object clicked on is not an existing filename.</p>

<h4>Automatic Profile Switching</h4>

<p>You can specify rules that, when satisified, changes any session's profile to this one. See <a href="automatic-profile-switching.html">Automatic Profile Switching</a> for all the details.
</p></p>

<h3>Keys</h3>

<hr>


<h4>Remap modifier keys</h4>

<p>iTerm2 allows you to change the meanings of the modifier keys only within iTerm2. This is useful, for example, if you find it difficult to press "option" for "meta" and would prefer to use "command" for that purpose.</p>

<h4>To switch tabs</h4>

<p>Tabs are normally navigated with cmd+number, but you can change the modifier used for that function here.</p>

<h4>To switch windows</h4>

<p>Windows are normally navigated with cmd+opt+number, but you can change the modifier used for that function here.</p>

<h4>Show/Hide iTerm2 with a system-wide hotkey</h4>

<p>When enabled, you can focus the Hotkey: field and press a keystroke. From then on, pressing that keystroke (even when iTerm2 is not the front application) will cause iTerm2 to come to the front. If it is the foreground app, it will be sent to the back. This requires that you enable access for assistive devices in the Universal Access panel of System Preferences.</p>

<h4>Hotkey toggles a dedicated window with profile</h4>

<p>If enabled, the hotkey set above will toggle a single window with a specific profile. This provides an always-available terminal.</p>

<h4>Hotkey window hides when focus is lost</h4>

<p>If enabled, the hotkey window will stay open even when another window gains keyboard focus.</p>

<h4>Global shortcut keys</h4>

<p>This interface works like the keyboard shortcut system in profiles (described above) but it affects all profiles. Settings here are overridden by those in a profile's key mappings.</p>

<h3>Arrangements</h3>

<hr>


<p>This tab lets you view saved window arrangements. You can delete them with the minus button and select the default arrangement.</p>

<h3>Pointer</h3>

<hr>


<h4>Mouse Button and Trackpad Gesture Actions</h4>

<p>You may assign custom actions to mouse clicks and trackpad gestures. The left mouse button is not configurable because its behavior is rather complex, however. This is especially useful if you have a mouse with many buttons. Any combination of mouse button + number of clicks + modifiers may be assigned an action. For gestures, three finger taps and swipes may be configured in combination with modifiers. The following actions are available:</p>

<h4>Extend selection</h4>

<p>The text selection will grow, either from its beginning or end, to the location of the pointer.</p>

<h4>Move pane</h4>

<p>The current pane will turn green. Click in another window's tab bar or in another pane to split to move the now-green pane.</p>

<h4>New Horizontal/Vertical split with profile</h4>

<p>The pane under the pointer will be split and the new split will use the specified profile.</p>

<h4>New Split/Tab/Window With Profile</h4>

<p>A new split pane/tab/window will be opened with the specified profile.</p>

<h4>Next/Previous Tab/Window</h4>

<p>Navigates through tabs and windows.</p>

<h4>Open Context Menu</h4>

<p>Opens the menu normally opened by a right click.</p>

<h4>Open URL in background</h4>

<p>Opens the URL under the pointer in your web browser without bringing the browser to the foreground.</p>

<h4>Open URL/Semantic History</h4>

<p>Opens the URL under the pointer, bringing the web browser to the foreground. If what's under the cursor is a filename on the local machine, it will be opened with Semantic History.</p>

<h4>Paste from Clipboard</h4>

<p>This is identical to Edit > Paste.</p>

<h4>Paste from Selection</h4>

<p>Pastes the most recent selection made in iTerm2, even if it's not what's in the pasteboard.</p>

<h4>Quicklook</h4>

<p>Defines the word under the cursor or, if it's a URL, opens it in a web browser popover.</p>

<h4>Select Next/Previous Pane</h4>

<p>Navigates panes according to how recently they were used.</p>

<h4>Select pane Above/Below/Left/Right</h4>

<p>Navigates panes by their layout.</p>

<h4>Send Escape Sequence...</h4>

<p>This action allows you to enter some text that will be sent when the associated key is pressed. First, the ESC character is sent, and then the text you entered is sent.</p>

<h4>Send Hex Code</h4>

<p>This action allows you to enter a sequence of hex codes that will be sent. Each value should begin with "0x" followed by one or two hex digits (0-9, a-f, or A-F). Each code should be separated by a space. You can see a list of hex codes on http://asciitable.com/ in the "Hx" column.</p>

<h4>Send Text</h4>

<p>This action allows you to enter a text string that will be sent when the associated key is pressed. The following escape characters are supported: \n (newline), \e (escape), \a (bell), \t (tab).</p>

<h4>Smart Selection</h4>

<p>Performs smart selection on the text under the pointer.</p>

<h4>Smart Selection ignoring Newlines</h4>

<p>Performs smart selection on the text under the pointer, ignoring newlines (e.g., if a URL is split by a hard newline, it can still be selected as a single item).</p>

<hr/>


<h4>Cmd-Click Opens Filename/URL</h4>

<p>If enabled, then clicking on a filename (of an existing file on the local machine) or a URL will open it.</p>

<h4>Ctrl-click reported to apps, does not open menu</h4>

<p>If enabled, ctrl-click will be sent to applications that support Xterm mouse reporting (if mouse reporting is enabled).</p>

<h4>Option-Click moves cursor</h4>

<p>If enabled, option-click will move the cursor to where the mouse pointer is. If you install shell integration, this will be well-behaved at the shell prompt by not sending up and down arrow keys.</p>

<h4>Focus follows mouse</h4>

<p>If enabled, moving the mouse over an inactive window will cause it to receive keyboard focus.</p>

<h4>Double-click performs smart selection</h4>

<p>If enabled, double click performs smart selection instead of word selection as is standard on macOS.</p>

<h4>Triple-click selects full wrapped lines</h4>

<p>If enabled, a triple click selects a whole line, even if it was longer than one row in the terminal. If off, then triple click selects exactly one row.</p>

<h4>Three-finger tap reports middle click to apps</h4>

<p>If enabled, a three-finger tap acts like a middle click for the purposes of mouse reporting.</p>

<hr>


<p><a name="documentation-scripting.html"></a></p>

<hr>


<h2>Scripting</h2>

<p>iTerm2 features Applescript support which allows you to automate many aspects of its behavior. Quite a bit of customization is also possible by writing shell scripts.</p>

<h3>Applescript</h3>

<p>iTerm2 has sophisticated Applescript support allowing one to write stand-alone scripts to launch the application and open multiple sessions with profiles into either new tabs or new windows. You can also set some other parameters for a session such as foreground and background colors, and transparency.</p>

<p>These scripts can then be saved as stand-alone executable applications.</p>

<h4>Autolaunching Scripts</h4>

<p>iTerm2 also supports autolaunching of an Applescript on startup. On startup, iTerm2 looks for an Applescript file in "~/Library/Application Support/iTerm/Scripts/AutoLaunch.scpt". If it is found, the "AutoLaunch.scpt" script is launched and executed.</p>

<h4>User-Defined Scripts</h4>

<p>iTerm2 also supports launching of user defined scripts from the "Scripts" menu. The scripts need to be stored under the ~/Library/Application Support/iTerm/Scripts directory. You can create this directory if it does not already exist. iTerm2 checks this directory on startup. Scripts must be named with the extension .scpt or .app.</p>

<h1>Reference</h1>

<h2>Objects</h2>

<p>The basic objects are: window, tab, and session. The application has zero or more windows, each window has one or more tabs, and each tab has one or more sessions. Multiple sessions in a tab happen when there are split panes.</p>

<hr/>


<h3>Application</h3>

<p>The application exposes various properties and provides functions that are described in this section. For example:</p>

<pre><code>tell application "iTerm2"
  create window with default profile
end tell
</code></pre>

<p class="script-entry">create window with default profile<br/>
create window with default profile command "<i>command</i>"</p>


<p>These commands create a window with the default profile. If you specify a command, it overrides the profile's command (which by default is to invoke <code>login</code>).</p>

<p>Examples:</p>

<pre><code>set newWindow to (create window with default profile)
set newWindow to (create window with default profile command "ls -l -R /")
</code></pre>

<p class="script-entry">create window with profile "<i>name</i>"<br/>
create window with profile "<i>name</i>" command "<i>command</i>"</p>


<p>These commands create a window with a named profile. If you specify a command, it overrides the profile's command (which by default is to invoke <code>login</code>).</p>

<p>Returns a reference to the new window.</p>

<p>Examples:</p>

<pre><code>set newWindow to (create window with profile "Name Of Some Profile")
set newWindow to (create window with profile "Name Of Some Profile" command "ls -l -R /")
</code></pre>

<p class="script-entry">current window</p>


<p>A reference to the window that most recently had keyboard focus.</p>

<pre><code>tell current window
...
end tell
</code></pre>

<p class="script-entry">windows</p>


<p></p></p>

<p>A <code>windows</code> property exposes an array of terminal windows. Other windows, like the preferences panel, are not included.
The following are standard Applescript idioms for accessing elements of an array of objects:</p>

<pre><code>tell first window
...
end tell

repeat with aWindow in windows
...
end repeat
</code></pre>

<hr/>


<h3>Windows</h3>

<p>These functions and properties are provided by windows. For example:</p>

<pre><code>tell application "iTerm2"
  tell current window
    create tab with default profile
  end tell
end tell
</code></pre>

<p>There are many standard Applescript functions (e.g., to get the window's size and position) that are not documented here.</p>

<p class="script-entry">create tab with default profile<br/>
create tab with default profile command "<i>command</i>"
create tab with profile "<i>name</i>"</br>
create tab with profile "<i>name</i>" command "<i>command</i>"
</p>


<p>Creates a tab with the default profile or a profile by name. If the command is specified, it is run instead of the profile's command/login shell.</p>

<p>Returns a reference to the new tab.</p>

<p class="script-entry">current session</p>


<p>The <code>current session</code> is the session that would receive keyboard input if the window had keyboard focus.</p>

<p class="script-entry">current tab</p>


<p>The <code>current tab</code> is the tab that is selected in the window.</p>

<p class="script-entry">id</p>


<p>The window ID. Useful for commands like <code>screencapture</code>.</p>

<p class="script-entry">name</p>


<p>The window's name, as appears in the title bar.</p>

<p class="script-entry">select</p>


<p>Gives the window keyboard focus and brings it to the front.</p>

<p class="script-entry">tabs</p>


<p>An array of tabs. See the methods on Tab, below.</p>

<hr/>


<h3>Sessions</h3>

<p>These functions and properties are provided by sessions. For example:</p>

<pre><code>tell application "iTerm2"
  tell current session of current window
    split horizontally with default profile
  end tell
end tell
</code></pre>

<p class="script-entry">background image</p>


<p>This is a string property that gives a path to the background image of the session.</p>

<p class="script-entry">close</p>


<p>Terminates the session and closes its pane.</p>

<p class="script-entry">Color properties</p>


<p>Various properties which are readable and settable affect the session's colors:</p>

<ul>
<li>background color</li>
<li>bold color</li>
<li>cursor color</li>
<li>cursor text color</li>
<li>foreground color</li>
<li>selected text color</li>
<li>selection color</li>
<li>ANSI black color</li>
<li>ANSI red color</li>
<li>ANSI green color</li>
<li>ANSI yellow color</li>
<li>ANSI blue color</li>
<li>ANSI magenta color</li>
<li>ANSI cyan color</li>
<li>ANSI white color</li>
<li>ANSI bright black color</li>
<li>ANSI bright red color</li>
<li>ANSI bright green color</li>
<li>ANSI bright yellow color</li>
<li>ANSI bright blue color</li>
<li>ANSI bright magenta color</li>
<li>ANSI bright cyan color</li>
<li>ANSI bright white color</li>
</ul>


<p>An example:</p>

<pre><code>set foreground color to {65535, 0, 0, 0}
</code></pre>

<p>Because Applescript is kind of a dumpster fire, the standard syntax for a color is <code>{red, green, blue, alpha}</code> where each value is a number between 0 and 65535.</p>

<p class="script-entry">answerback string</p>


<p>The string sent when the <code>ENQ</code> escape sequence is received.</p>

<p class="script-entry">columns</p>


<p>The width of the session in character cells.</p>

<p class="script-entry">contents</p>


<p>Returns the visible contents of the session as a string. Each row is terminated with a newline.</p>

<p class="script-entry">id</p>


<p>Returns the session's unique identifier.</p>

<p class="script-entry">is at shell prompt</p>


<p>Indicates if the session is at a shell prompt accepting a command. Only works if <a href="/shell_integration.html">Shell Integration</a> is installed; if not it will return false.</p>

<p class="script-entry">is processing</p>


<p>Returns a boolean indicating if the session received output recently.</p>

<p class="script-entry">name</p>


<p>A string property with the session's name as seen in its title bar.</p>

<p class="script-entry">profile name</p>


<p>The name of the profile the session was created with. A string. Read-only.</p>

<p class="script-entry">rows</p>


<p>The height of the session in character cells.</p>

<p class="script-entry">set columns to <i>number</i><br/>
set rows to <i>number</i></p>


<p>Changes the size of the session.</p>

<p class="script-entry">split horizontally with default profile<br/>
split vertically with default profile<br/>
split horizontally with default profile command "<i>command</i>"<br/>
split vertically with default profile command "<i>command</i>"</p>


<p>Splits the session either horizontally or vertically. If the optional <em>command</em> is provided then it is run in place of the profile's command. A horizontal split has a horizontal divider, while a vertical split has a vertical divider.</p>

<p>Returns a reference to a session.</p>

<p class="script-entry">split horizontally with profile "<i>name</i>"<br/>
split vertically with profile "<i>name</i>"<br/>
split horizontally with profile "<i>name</i>" command "<i>command</i>"<br/>
split vertically with profile "<i>name</i>" command "<i>command</i>"</p>


<p>Like the "default profile" commands, but uses a named profile instead of the default profile.</p>

<p class="script-entry">split horizontally with same profile<br/>
split vertically with same profile<br/>
split horizontally with same profile command "<i>command</i>"<br/>
split vertically with same profile command "<i>command</i>"</p>


<p>Like the "default profile" commands, but uses the current session's profile.</p>

<p class="script-entry">select</p>


<p>Makes the session active in its tab. Does not affect which tab is selected or which window has keyboard focus.</p>

<p class="script-entry">text</p>


<p>A synonym for <code>contents</code>.</p>

<p class="script-entry">transparency</p>


<p>A floating-point value from 0 to 1 giving how transparent the session is.</p>

<p class="script-entry">tty</p>


<p>The name of the session's tty (e.g., /dev/ttys01). Returns a string.</p>

<p class="script-entry">unique id</p>


<p>A string uniquely identifying the session.</p>

<p class="script-entry">variable "<i>name</i>"<br/>
set variable named "<i>name</i>" to "<i>value</i>"</p>


<p>Gets and sets the value of a variable by name. Variables are described in <a href="/badges.html">Badges</a>. You may only set user-defined variables, whose names always begin with "user.".</p>

<p class="script-entry">write text "<i>text</i>"<br/>
write text "<i>text</i>" newline NO</p>


<p>Writes text to the session, as though you had typed it. Optionally without a newline.</p>

<p class="script-entry">write contents of file "<i>filename</i>"</p>


<p>Writes the contents of a file to the session as though you had typed it.</p>

<hr/>


<h3>Tabs</h3>

<p>These functions and properties are provided by tabs. For example:</p>

<pre><code>tell application "iTerm2"
  tell current tab of current window
    select
  end tell
end tell
</code></pre>

<p class="script-entry">close</p>


<p>Closes the tab.</p>

<p class="script-entry">current session</p>


<p>The session in this tab that most recently had keyboard focus.</p>

<p class="script-entry">index</p>


<p>The index of the tab in the window, starting from 0.</p>

<p class="script-entry">select</p>


<p>Selects the tab, making it the current tab for the window.</p>

<p class="script-entry">sessions</p>


<p>An array of sessions.</p>

<p class="script-entry">sessions</p>


<p>An array of sessions in this tab.</p>

<p>The index from 0 of the tab in its window.</p>

<h2>Supporting both old and new versions of iTerm2</h2>

<p>If your application needs to support both the old and new Applescript syntax, this is the recommended technique:</p>

<pre>
on theSplit(theString, theDelimiter)
    set oldDelimiters to AppleScript's text item delimiters
    set AppleScript's text item delimiters to theDelimiter
    set theArray to every text item of theString
    set AppleScript's text item delimiters to oldDelimiters
    return theArray
end theSplit

on IsModernVersion(version)
    set myArray to my theSplit(version, ".")
    set major to item 1 of myArray
    set minor to item 2 of myArray
    set veryMinor to item 3 of myArray
    
    if major < 2 then
        return false
    end if
    if major > 2 then
        return true
    end if
    if minor < 9 then
        return false
    end if
    if minor > 9 then
        return true
    end if
    if veryMinor < 20140903 then
        return false
    end if
    return true
end IsModernVersion

on NewScript()
    -- Return the modern script as a string here; what follows is an example.
    return "create window with default profile"
end NewScript

on OldScript()
    -- Return the legacy script as a string here; what follows is an example.
    return "
    set myTerm to (make new terminal)
    tell myTerm
        launch session \"Default\"
    end tell"
end OldScript

tell application "iTerm"
    if my IsModernVersion(version) then
        set myScript to my NewScript()
    else
        set myScript to my OldScript()
    end if
end tell

set fullScript to "tell application \"iTerm\"
" & myScript & "
end tell"

run script fullScript
</pre>


<p><a name="documentation-shell-integration.html"></a></p>

<hr>


<h2>Shell Integration</h2>

<p>iTerm2 may be integrated with the unix shell so that it can keep track of your command history, current working directory, host name, and more--even over ssh. This enables several useful features.</p>

<h3>How To Enable Shell Integration</h3>

<p>The easiest way to install shell integration is to select the <em>iTerm2&gt;Install Shell Integration</em> menu item. It will download and run a shell script as described below. You should do this on every host you ssh to as well as your local machine. The following shells are supported: tcsh, zsh, bash, and fish 2.3 or later. Contributions for other shells are most welcome.</p>

<p>When you select the <em>iTerm2&gt;Install Shell Integration</em> menu item, it types this for you:</p>

<pre>curl -L https://iterm2.com/misc/install_shell_integration.sh | bash</pre>


<p>Don't care for piping curl to bash? Do it by hand. First, download the right script for your shell:</p>

<pre>curl -L https://iterm2.com/misc/`basename $SHELL`_startup.in \
-o ~/.iterm2_shell_integration.`basename $SHELL`</pre>


<p>Then add this to your login script (.login for tcsh, .bash_profile for bash, .zshrc for zsh, or config.fish file for fish):</p>

<pre>source ~/.iterm2_shell_integration.`basename $SHELL`</pre>


<p>Don't want to or can't install a login script? See the workaround at the end of this document using
triggers.</p>

<h3>Features</h3>

<p>Shell Integration enables numerous features:</p>

<h4>Marks</h4>

<p>These are saved locations in history. They make it easy to navigate to previous shell prompts or other locations of interest.</p>

<h4>Alert when current command finishes running.</h4>

<p>iTerm2 will present a modal alert when a long-running command finishes, if you ask it to.</p>

<h4>View information about commands.</h4>

<p>You can see the return status code, working directory, running time, and more for shell commands entered at the prompt in the past.</p>

<h4>Download files from remote hosts with a click.</h4>

<p>You can right click on a filename (e.g., in the output of <em>ls</em>) to download it.</p>

<h4>Drag-drop files to upload with scp.</h4>

<p>Hold down option and drag-drop a file from Finder into iTerm2 to upload it.</p>

<h4>View command history.</h4>

<p>It can be seen and searched in the toolbelt or quickly accessed in a popup window.</p>

<h4>Easy access to recently and frequently used directories.</h4>

<p>iTerm2 remembers the directories you use, sorting them by "frecency" and giving you access to them in the toolbelt and in a popup window.</p>

<h4>Assign profiles to hostnames, usernames, or username+hostname combinations.</h4>

<p>Sessions will automatically switch profiles as you log in and out according to rules you define.</p>

<h4>Ensures the command prompt always starts at the left column, even when the last command didn't end in a newline.</h4>

<p>Each of these features are described in more detail below.</p>

<h3>How it works</h3>

<p>Shell Integration works by configuring your shell on each host you log into to send special escape codes that convey the following information:</p>

<ul>
<li>Where the command prompt begins and ends.</li>
<li>Where a command entered at the command prompt ends and its output begins.</li>
<li>The return code of the last-run command.</li>
<li>Your username.</li>
<li>The current host name.</li>
<li>The current directory.</li>
</ul>


<h3>How to use it</h3>

<h4>Marks</h4>

<p>When shell integration is enabled, iTerm2 automatically adds a mark at each command prompt. Marks are indicated visually by a small blue triangle in the left margin.</p>

<p><img src="/images/mark.png" /></p>

<p>You can navigate marks with Cmd-Shift-Up and Down-arrow keys.</p>

<p>If you have a multi-line prompt and would like to customize the mark's location, add this to your PS1 at the location where the mark should appear:</p>

<p>For zsh:</p>

<pre>%{$(iterm2_prompt_mark)%}</pre>


<p>For bash:</p>

<pre>\[$(iterm2_prompt_mark)\]</pre>


<p>Fish users can place this line somewhere in their fish_prompt function:</p>

<pre>iterm2_prompt_mark</pre>


<p>This feature is not supported in tcsh.</p>

<h4>Alert on next mark</h4>

<p>iTerm2 can show an alert box when a mark appears. This is useful when you start a long-running command. Select <em>Edit&gt;Marks and Annotations&gt;Alert on next mark</em> (Cmd-Opt-A) after starting a command, and you can go do something else in another window or tab. When the command prompt returns, a modal alert will appear, calling attention to the finished job.</p>

<p><img src="/images/AlertOnMark.png"></p>

<h4>Command status</h4>

<p>The mark on a command line will turn red if a command fails. You can right click the mark to view its return code.</p>

<p><img src="/images/FailedCommandMenu.png"></p>

<h4>Download with scp</h4>

<p>You can right-click on a filename (e.g., in the output of <em>ls</em>) and select <em>Download with scp from </em>hostname**, and iTerm2 will download the file for you.</p>

<p><img src="/images/DownloadWithScp.png"></p>

<p>A new menu bar item will be added called <em>Downloads</em> that lets you view downloaded files and track their progress.</p>

<p><img src="/images/DownloadsMenu.png"></p>

<h4>Upload with scp</h4>

<p>If you drop a file (e.g., from Finder) into iTerm2 while holding the option key, iTerm2 will offer to upload the file via scp to the remote host into the directory you were in on the line you dropped the file on. A new menu bar item will be added called <em>Uploads</em> that lets you view uploaded files and track their progress.</p>

<h4>Command history</h4>

<p>With shell integration, iTerm2 can track your command history. The command history is stored separately for each username+hostname combination. There are four places where this is exposed in the UI:</p>

<h5>Command history popup</h5>

<p>You can view and search the command history with <em>Edit&gt;Open Command History...</em> (Shift-Cmd-;).</p>

<h5>Autocomplete</h5>

<p>Commands in command history are also added to Autocomplete (Cmd-;). If <em>Preferences&gt;General&gt;Save copy/paste history and command history to disk</em> is enabled, then command history will be preserved across runs of iTerm2 (up to 200 commands per user/hostname).</p>

<h5>Toolbelt</h5>

<p>A command history tool may be added to the toolbelt by selecting <em>Toolbelt&gt;Command History</em>.</p>

<p><img src="/images/CommandHistory.png" width=207 height=301></p>

<p>Bold commands are from the current session. Clicking on one will scroll to reveal it. Double-clicking enters the command for you. Option-double-clicking will output a "cd" command to go to the directory you were in when it was last run.</p>

<h5>Command Completion</h5>

<p>iTerm2 will present command completion suggestions automatically when <em>View&gt;Auto Command Completion</em> is selected.</p>

<h4>Recent Directories</h4>

<p>With shell integration, iTerm2 will remember which directories you have used recently. The list of preferred directories is stored separately for each username+hostname combination. It is sorted by "frencency" (frequency and recency of use). There are two places it is exposed in the UI:</p>

<h5>Recent Directories popup</h5>

<p>You can view and search your recently and frequently used directories in <em>Edit&gt;Open Recent Directories...</em> (Cmd-Opt-/).</p>

<h5>Toolbelt</h5>

<p>A <em>Recent Directories</em> tool may be added to the toolbelt by selecting <em>Toolbelt&gt;Recent Directories</em>.
<img src="/images/DirectoriesTool.png" style='border:1px solid #aaa'></p>

<p>Double-clicking a directory will type its path for you into the current terminal. Option-double-click will enter a "cd" command for you. You can also right-click on a directory to toggle its "starred" status. A starred directory will always appear at the bottom of the list so it is easy to find.</p>

<h4>Automatic Profile Switching</h4>

<p>Please see the documentation at <a href="/automatic-profile-switching.html">Automatic Profile Switching</a>.</p>

<h4>Shell Integration for root</h4>

<p>If you'd like to be able to use shell integration as root, you have two
options. The first option, presuming you use bash, is to become root with <code>sudo
-s</code> (which loads your <code>.bashrc</code> as root) and add this to your <code>.bashrc</code>:</p>

<pre>
test $(whoami) == root && source "${HOME}/.iterm2_shell_integration.bash"
</pre>


<p>The alternative is to use Triggers to emulate shell integration as described in the following section.</p>

<h4>Triggers</h4>

<p>For some users, installing a login script on every host they connect to is not
an option. To be sure, modifying root's login script is usually a bad idea. In these cases
you can get the benefits of shell integration by defining triggers.  There are
two relevant triggers: <em>Report Host &amp; User</em> and <em>Report Directory</em></p>

<p>Use these triggers to tell iTerm2 your current username,
hostname, and directory. Suppose you have a shell prompt that looks like this:</p>

<pre>
george@example.com:/home/george%
</pre>


<p>It exposes the username, hostname, and working directory. We can harvest those with a regular
expression. First, define a trigger with this regex:</p>

<pre>
^(\w+)@([\w.]+):.+%
</pre>


<p>It captures the username and hostname from the example prompt above. Set the trigger's parameter to:</p>

<pre>
\1@\2
</pre>


<p>Then create another trigger with the action <em>Set Directory</em>. This regular expression will extract
the directory from the example prompt:</p>

<pre>
^\w+@[\w.]+:([^%]+)%
</pre>


<p>Set this trigger's parameter to</p>

<pre>
\1
</pre>


<p>Make sure both triggers have their <em>Instant</em> checkbox enabled so they'll take effect before a
newline is received.</p>

<p>You may specify a user name or host name alone to <em>Report Host &amp; User</em>. If
you give just a user name then the previous host name will be preserved; if you
give just a host name then the previous user name will be preserved. To change
the user name only, give a parameter like <code>user@</code>. To change the host name only,
give a parameter like <code>example.com</code>.</p>

<h4>A Note on SCP</h4>

<p>iTerm2 can do uploads and downloads with scp as described above. There are a few things you should know.</p>

<p>iTerm2 links in libssh2, and does not shell out to scp. It respects /etc/known_hosts and ~/.ssh/known_hosts, and will update the latter file appropriately. Host fingerprints are verified. Password, keyboard-interactive, and public-key authentication are supported. Private keys by default come from ~/.ssh/id_rsa, id_dsa, or id_ecdsa, and may be encrypted with an optional passphrase.</p>

<p>iTerm2 respects ssh_config files, but only a subset of the commands are understood:</p>

<ul>
<li>Host</li>
<li>HostName</li>
<li>User</li>
<li>Port</li>
<li>IdentityFile</li>
</ul>


<p>Settings pulled from ssh_config override the hostname and user name provided by shell integration. The shell integration-provided host name is used as the text against which <em>Host</em> patterns are matched.</p>

<p>The following files are parsed as ssh_config files, in order of priority:</p>

<ul>
<li>~/Library/Application Support/iTerm/ssh_config</li>
<li>~/.ssh/config</li>
<li>/etc/ssh_config</li>
</ul>


<p>The scp code is relatively new. If you are in a high-security environment, please keep this in mind.</p>

<p><a name="documentation-smart-selection.html"></a></p>

<hr>


<h2>Smart Selection</h2>

<p>iTerm2 offers a Smart Selection feature that simplifies making selections on semantically recognizable objects.</p>

<h4>How do I use Smart Selection?</h4>

<p>A quad-click (four clicks of the left mouse button in quick succession) activates Smart Selection at the mouse cursor's position. By default, the following kinds of strings are recognized:</p>

<ul>
        <li>Words bounded by whitespace or line boundaries.</li>
        <li>C++-style pairs of identifiers separated by double colons, such as "namespace::identifier".</li>
        <li>Filesystem paths, such as "/foo/bar/baz.txt".</li>
        <li>Quoted strings such as "foo bar".</li>
        <li>Java or Python-style include paths, such as "foo.bar.baz".</li>
        <li>URIs with the schemes: mailto, http, https, ssh, or telnet.</li>
        <li>Objective-C selectors like "@selector(foo:bar:)".</li>
        <li>Email addresses.</li>
</ul>


<h4>How do I Change Smart Selection Rules?</h4>

<p>Under Preferences>Profiles>Advanced, you may edit the smart selection rules. In addition to a regular expression, each rule also has a Precision attribute, which takes a value of Very Low, Low, Normal, High, or Very High. Intuitively, it refers to how sure one can be that when a rule's regular expression finds a match that it is what the user intended. For example, the "Word" rule is low precision (it matches almost every time), while the "HTTP URL" rule is very high precision (it almost never produces false positives). This allows the "HTTP URL" rule to take precedence when both match, unless the "Word" rule matches a much longer string. That might happen, for instance, if there were a non-URL character after a URL followed by a lot more text. The precision levels have a very strong effect, so it's very rare for a lower precision rule to take precedence over a higher precision rule.</p>

<p>When editing rules, it is advised that you experiment with different precision levels and different kinds of strings to find one that works well. A collection of test cases may be found at smart_selection_cases.txt.</p>

<p>When Smart Selection is activated, iTerm2 tries each regular expression. For a given regex, various strings on the screen are tested until the longest match is found. Only matches that include the character under the cursor are of interest. The longest such match is added to a pool of "selection candidates". Each candidate is assigned a score equal to its length in characters. Among the candidates in the highest precision class (where Very High is the highest class and Very Low is the lowest) with any matches, the higheset scoring one is used as the selection.</p>

<h4>Actions</h4>

<p>Actions may be associated with smart selection rules. When you right click in a terminal, smart selection is performed at the cursor's location. Any smart selection rule that matches that location will be searched for associated actions, and those actions will be added to the context menu. Actions may open a file, open a URL, run a command, or start a coprocess. A cmd-click on text matching a smart selection rule will invoke the first rule.</p>

<h4>Regular Expressions</h4>

<p>Regular expressions conform to the <a href="http://userguide.icu-project.org/strings/regexp">ICU regular expressions</a> rules.</p>

<p><a name="documentation-triggers.html"></a></p>

<hr>


<h2>Triggers</h2>

<p>A trigger is an action that is performed when text matching some regular expression is received in a terminal session.</p>

<h4>How to Create a Trigger</h4>

<p>To create a trigger, open the <strong>Preferences</strong> panel. Select the <strong>Profiles</strong> tab. Choose the profile to which you wish to add a trigger. Then select the <strong>Advanced</strong> tab. Click the <strong>Edit</strong> button in the <strong>Triggers</strong> section. A panel opens that displays any existing triggers. You can click the <strong>+</strong> button to add a new trigger.</p>

<p>Triggers have a regular expression, an action, an optional parameter, and may be marked as <em>Instant</em>.</p>

<h4>Regular Expression</h4>

<p>Regular expressions conform to the <a href="http://userguide.icu-project.org/strings/regexp">ICU regular expressions</a> rules. Text that is written to the screen including the BEL control code are sent to the regex matcher for evaluation. Only one line at a time is matched. By default, matching is performed when a newline or cursor-moving escape code is processed. If a line is very long, then only the <em>last</em> three wrapped lines are used (that is, the last three lines as seen on the display). This is done for performance reasons. You can change this limit in Advanced Preferences &gt; Number of screen lines to match against trigger regular expressions.</p>

<h4>Actions</h4>

<p>The following actions are available:</p>

<ul>
        <li>Bounce Dock Icon: Makes the dock icon bounce until the iTerm2 window becomes key.</li>
        <li>Capture Output: Save the line to the Captured Output toolbelt tool. See <a href="captured_output.html">Captured Output</a>. The parameter is text to send (as though it had been typed) when you double-click on an entry in the Captured Output tool.</li>
        <li>Highlight Text: The text matching the regex in the trigger will change color. The parameter sets the color.</li>
        <li>Open Password Manager: Opens the password manager. You can specify which account to select by default.</li>
        <li>Post Notification: Posts a notification with Growl (if available) or Notification Center.</li>
        <li>Report Directory: Tells iTerm2 what your current directory is. You can use this to enable <a href="shell_integration.html">Shell Integration</a> features without installing the scripts. The parameter is your current directory.</li>
        <li>Report User & Host: Tells iTerm2 what your user or host name is. You can use this to enable <a href="shell_integration.html">Shell Integration</a> features without installing the scripts. To specify just a user name, say `user@`. For just a host, say `@host`. For both, say `user@host`.</li>
        <li>Ring Bell: Plays the standard system bell sound once.</li>
        <li>Run Command: Runs a user-defined command.</li>
        <li>Run Coprocess: Runs a <a href="coprocesses.html">Coprocess</a>.</li>
        <li>Send Text: Sends user-defined text back to the terminal as though the user had typed it.</li>
        <li>Set Mark: Sets a mark. You can specify whether you'd like the display to stop scrolling after the trigger fires.</li>
        <li>Show Alert: Shows an alert box with user-defined text.</li>
        <li>Stop Processing Triggers: When this action is invoked no triggers further down the list will be invoked for the current text.</li>
</ul>


<h4>Parameter?</h4>

<p>Various actions (Run Command, Run Coprocess, Send Growl Alert, Send Text, and Show Alert) require additional information. This is specified in the "Parameters" field. When the paramter is a text field with freeform entry, some special values are defined:</p>

<table>
        <thead>
                <tr>
                        <th>Value</th>
                        <th>Meaning</th>
                </tr>
        </thead>
        <tbody>
                <tr>
                        <td>\0</td>
                        <td>The entire value matched by the regular expression.</td>
                </tr>
                <tr>
                        <td>\1, \2, ..., \9</td>
                        <td>The nth value captured by the regular expression.</td>
                </tr>
                <tr>
                        <td>\a</td>
                        <td>A BEL character (^G).</td>
                </tr>
                <tr>
                        <td>\b</td>
                        <td>A backspace character ^H.</td>
                </tr>
                <tr>
                        <td>\e</td>
                        <td>An ESC character (ascii 27).</td>
                </tr>
                <tr>
                        <td>\n</td>
                        <td>A newline character.</td>
                </tr>
                <tr>
                        <td>\r</td>
                        <td>A linefeed character.</td>
                </tr>
                <tr>
                        <td>\t</td>
                        <td>A tab character.</td>
                </tr>
                <tr>
                        <td>\xNN</td>
                        <td>A hex value NN (for example: \x1b sends ascii code 27, an ESC).</td>
                </tr>
        </tbody>
</table>


<h4>Instant</h4>

<p>When <i>Instant</i> is set, the trigger will fire once per line as soon as the match occurs, without waiting for a newline. This was added for the benefit of the <i>Open Password Manager</i> trigger, since password prompts usually are not followed by a newline. This may cause certain regular expressions (for example, ".*") to match less than they otherwise might.</p>

<h4>Example</h4>

<p>The <a href="https://github.com/mmastrac/iterm2-zmodem">iTerm2-zmodem</a> project demonstrates hooking up iTerm2 to zmodem upload and download.</p>

<p><a name="documentation-captured-output.html"></a></p>

<hr>


<h2>Captured Output</h2>

<p>iTerm2 has a feature called "Captured Output" which helps you find and track important lines of output from logs, build processes, and such.</p>

<center><img src="img/screenshots/v3-screen-shots/iterm2-captured-output.gif"></center>


<h3>What does it do?</h3>

<p>Captured Output is a tool that may be added to iTerm2's toolbelt (a view on the right side of terminal windows). It works in conjunction with user-defined <a href="https://www.iterm2.com/triggers.html">Triggers</a>. A Trigger whose action is <em>Capture Output</em> looks for lines of output that match its regular expression. When one is found, the entire line is added to the Captured Output tool. When the user clicks on a line in the Captured Output tool, iTerm2 scrolls to reveal that line. Double-clicking on a line in the Captured Output tools run a user-defined <a href="https://www.iterm2.com/coprocesses.html">Coprocess</a>.</p>

<h3>Shell Integration Required</h3>

<p><a href="https://www.iterm2.com/shell_integration.html">Shell Integration</a> must be installed because Captured Output ties in to command history.</p>

<h3>Example</h3>

<p>One way to use Captured Output is to view compiler output. Suppose you run <em>make</em> and get thousands of lines of output, some of which may contain errors or warnings. You'd like to examine each one and take some action on it. Here's how you would use Captured Output to assist with this task:</p>

<h4>Step 1: Create Triggers</h4>

<p><a href="/documentation-triggers.html">Create a Trigger</a> that matches your compiler's errors and warnings. Clang's errors look like this:</p>

<pre>
filename.c:54:9: error: use of undeclared identifier 'foo'
</pre>


<p>The following regular expression matches errors and warnings from Clang:</p>

<pre>
^([a-zA-Z0-9+/.-]+):([0-9]+):[0-9]+: (?:error|warning):
</pre>


<p>There are two capture groups defined. We'll come back to those later.</p>

<h4>Step 2: Open the Toolbelt</h4>

<p>Open the Toolbelt by selecting the menu item Toolbelt &gt; Show Toolbelt. Enable the Toolbelt &gt; Captured Output menu item to ensure it is visible.</p>

<h4>Step 3: Run make</h4>

<p>Kick off the build by running make. It spits out thousands of lines of output.</p>

<h4>Step 4: Examine the Captued Output tool</h4>

<p>Any errors or warnings that appear in the compiler output will appear in the Captured Output tool.</p>

<p><img src="images/CapturedOutput.png">
Select an entry in the tool. iTerm2 scrolls to display the line and briefly highlights it in blue.</p>

<h4>Step 5: Open the file containing the error</h4>

<p>The Trigger created in step 1 takes an optional parameter. It is a command for iTerm2 to exceute as a <a href="https://www.iterm2.com/coprocesses.html">Coprocess</a> when you double-click an entry in the Captured Output tool. An example command is:</p>

<pre>
echo :e \1; sleep 0.5; echo \2G
</pre>


<p>This coprocess command assumes you are in vi, and types a command to open the offending file and scrolls to the offending line. This is where the capture groups in the regular expression from step 1 become useful. For example, if the filename was "filename.c" and the error was on line 20, as in this error message:</p>

<pre>
filename:c:20:9 error: use of undeclared identifier 'foo'
</pre>


<p>The coprocess would:</p>

<ul>
<li>Type ":e filename.c", followed by enter, as though you were typing it at the keyboard.</li></li>
<li>Wait half a second.</li></li>
<li>Type "20G".</li></li>
</ul>


<h4>Step 6: Check it off the list</h4>

<p>You can right-click on an entry in Captured Output to open a menu, which contains a single item: "Toggle Checkmark". This helps you remember which entries have been dealt with as you go through errors and warnings in your compiler output.</p>

<h3>Navigation</h3>

<p>Captured Output is linked to the Command History tool. If no command is selected in the Command History tool, then the most recent captured output is displayed. Otherwise, the captured output from the selected command is displayed. You can remove a selection from the Command History tool by cmd-clicking on it.</p>

<p><a name="documentation-fonts.html"></a></p>

<hr>


<h2>Fonts</h2>

<p>While iTerm2 does not require monospaced fonts, they look much better than proportionately spaced fonts. If you want to use Consolas, you'll need to correct its baseline offset as described at <a href="http://mbauman.net/geek/2009/03/15/minor-truetype-font-editing-on-a-mac/">how to fix Consolas baseline</a>.</p>

<p>iTerm2 has the capability of rendering text with thin strokes to improve readability. You can change how this works in the <strong>Text</strong> panel of the <strong>Profiles</strong> tab of <strong>Preferences</strong>.</p>

<p>You can also specify the a "non-ASCII" font in the <strong>Text</strong> panel of profile preferences. This font will be used for all code points greater than or equal to 128 or for characters with combining marks.</p>

<p><a name="documentation-images.html"></a></p>

<hr>


<h2>Inline Images</h2>

<p>iTerm2 is able to display images within the terminal. Using a similar mechanism, it can also facilitate file transfers over any transport (such as ssh or telnet), even in a non-8-bit-clean environment.</p>

<div style="border: 1px solid black; margin: 8px; padding: 4px">
Just want to try it out and don't care about the protocol? Use the imgcat tool. <a href="https://raw.github.com/gnachman/iTerm2/master/tests/imgcat">Download imgcat here</a>
</div>


<h3>Example: imgcat</h3>

<p>Using the <a href="https://raw.github.com/gnachman/iTerm2/master/tests/imgcat">imgcat</a> script, one or more images may be displayed in a terminal session. For example:</p>

<p><img src="images/inline_image_sparky_demo.png"></p>

<p>Critically, animated GIFs are supported as of version 2.9.20150512.</p>

<h3>Protocol</h3>

<p>iTerm2 extends the xterm protocol with a set of proprietary escape sequences. In general, the pattern is:</p>

<pre>ESC ] 1337 ; key = value ^G</pre>


<p>Whitespace is shown here for ease of reading: in practice, no spaces should be used.</p>

<p>For file transfer and inline images, the code is:</p>

<pre>ESC ] 1337 ; File = [optional arguments] : base-64 encoded file contents ^G</pre>


<p>The optional arguments are formatted as <code>key=value</code> with a semicolon between each key-value pair. They are described below:</p>

<table>
<tr>
  <th>Key</th><td></td><th>Description of value</th>
</tr><tr>
  <td>name</td><td>&nbsp;&nbsp;</td><td>base-64 encoded filename. Defaults to "Unnamed file".</td>
</tr><tr>
<td>size</td><td>&nbsp;&nbsp;</td><td>File size in bytes. Optional; this is only used by the progress indicator.</td>
</tr><tr>
<td>width</td><td>&nbsp;&nbsp;</td><td>Width to render. See notes below.</td>
</tr><tr>
<td>height</td><td>&nbsp;&nbsp;</td><td>Height to render. See notes below.</td>
</tr><tr>
<td>preserveAspectRatio</td><td>&nbsp;&nbsp;</td><td>If set to 0, then the image's inherent aspect ratio will not be respected; otherwise, it will fill the specified width and height as much as possible without stretching. Defaults to 1.</td>
</tr><tr>
<td>inline</td><td>&nbsp;&nbsp;</td><td>If set to 1, the file will be displayed inline. Otherwise, it will be downloaded with no visual representation in the terminal session. Defaults to 0.</td>
</tr>
</table>


<p>The width and height are given as a number followed by a unit, or the word "auto".</p>

<ul>
<li><em>N</em>: <em>N</em> character cells.</li></li>
<li><em>N</em>px: <em>N</em> pixels.</li></li>
<li><em>N</em>%: <em>N</em> percent of the session's width or height.</li></li>
<li>auto: The image's inherent size will be used to determine an appropriate dimension.</li></li>
</ul>


<h3>More on File Transfers</h3>

<p>By omitting the <code>inline</code> argument (or setting its value to 0), files will be downloaded and saved in the <em>Downloads</em> folder instead of being displayed inline. Any kind of file may be downloaded, but only images will display inline. Any image format that macOS supports will display inline, including PDF, PICT, EPS, or any number of bitmap data formats (PNG, GIF, etc.). A new menu item titled <em>Downloads</em> will be added to the menu bar after a download begins, where progress can be monitored and the file can be located, opened, or removed.</p>

<h3>Sample Code</h3>

<p>Sample code for displaying images may be found here.</p>

<h4><a href="https://raw.github.com/gnachman/iTerm2/master/tests/imgls">imgls</a></h4>

<p>Provides an augmented directory listing that includes a thumbnail of each image in a directory.</p>

<h4><a href="https://raw.github.com/gnachman/iTerm2/master/tests/imgcat">imgcat</a></h4>

<p>Displays one or more images inline at their full size.</p>

<h4><a href="https://raw.github.com/gnachman/iTerm2/master/tests/download.sh">download.sh</a></h4>

<p>Downloads a file, but does not display it inline.</p>

<h4><a href="https://raw.github.com/gnachman/iTerm2/master/tests/divider">divider</a></h4>

<p>Draws a full-width, one line-tall graphical divider.</p>

<p><img src="images/inline_images_divider.png"></p>

<p><a name="documentation-badges.html"></a></p>

<hr>


<h2>Badges</h2>

<script>
function show(name) {
  document.getElementById("bash").style.display="none";
  document.getElementById("fish").style.display="none";
  document.getElementById("tcsh").style.display="none";
  document.getElementById("zsh").style.display="none";
  document.getElementById(name).style.display="";
}
</script>


<p>A <em>badge</em> is a large text label that appears in the top right of a terminal session to provide dynamic status, such as the current host name or git branch. Its initial value is defined in <strong>Preferences&gt;Profiles&gt;General&gt;Badge</strong> and it can be changed by an iTerm2-proprietary escape sequence. It may also reference iTerm2- and user-defined variables.</p>

<p>Here is an example of a session with a badge indicating the current user and host name.</p>

<p><img src="images/Badge.png"></p>

<h3>Availability</h3>

<p>Support for badges is available in version 2.9 and later, currently distributed in the <a href="/nightly/latest">nightly builds</a> and is in the master branch of the <a href="https://github.com/gnachman/iTerm2">GitHub repo</a>. It is not in version 2.1.1.</p>

<h3>Variables</h3>

<p>A badge may reference variables. There are two kinds of variables: user-defined variables and iTerm2-defined variables. User-defined variables may be set by an escape sequence described below.</p>

<p>The syntax for referencing a variable is to place the variable name between <em>\(</em> and <em>)</em>. For example:</p>

<pre>
\(session.username)@\(session.hostname)
</pre>


<p>Undefined variables evaluate to an empty string.</p>

<h3>iTerm2-Defined Variables</h3>

<p>The following variables are defined by iTerm2:</p>

<table style="background: white">
  <tr class="tableheader">
    <th style="width: 100pt">Variable Name</th>
    <th>Description</th>
  </tr>

  <tr>
    <td>session.name</td>
    <td>The current session's name. Defaults to the profile name. May be changed with the escape sequence <strong>OSC 1 ; <i>name</i> ST</strong>, or by editing the session title in <strong>View&gt;Edit Current Session</strong>.</td>
  </tr>

  <tr>
    <td>session.columns</td>
    <td>The number of columns in the current session.</td>
  </tr>

  <tr>
    <td>session.rows</td>
    <td>The number of rows in the current session.</td>
  </tr>

  <tr>
    <td>session.hostname</td>
    <td>The current hostname. Only set if <a href="shell_integration.html">Shell Integration</a> is installed.</td>
  </tr>

  <tr>
    <td>session.username</td>
    <td>The current username. Only set if <a href="shell_integration.html">Shell Integration</a> is installed.</td>
  </tr>

  <tr>
    <td>session.path</td>
    <td>The current path. Works best if <a href="shell_integration.html">Shell Integration</a> is installed.</td>
  </tr>
</table>


<h3>User-Defined Variables</h3>

<p>You can provide additional information in the form of user-defined variables. To create a user-defined variable you must modify your shell's rc script by defining a function named iterm2_print_user_vars that calls iterm2_set_user_var one or more times. See the example below.</p>

<p>Here's an example that sets a user-defined variable called "gitBranch" to the git branch of the current directory. Pick your shell to see the version you need: <a style="cursor:pointer" onclick="show('bash')">bash</a> |
<a style="cursor:pointer" onclick="show('fish')">fish</a> |
<a style="cursor:pointer" onclick="show('tcsh')">tcsh</a> |
<a style="cursor:pointer" onclick="show('zsh')">zsh</a></p>

<pre id="bash">
# bash: Place this in .bashrc.
function iterm2_print_user_vars() {
  iterm2_set_user_var gitBranch $((git branch 2> /dev/null) | grep \* | cut -c3-)
}
</pre>


<pre id="fish" style="display: none">
# fish: Place this in ~/.config/fish/config.fish after the line
# "source ~/.iterm2_shell_integration.fish".
function iterm2_print_user_vars
  set -l git_branch (git branch ^/dev/null | sed -n '/\* /s///p')
  iterm2_set_user_var gitBranch "$git_branch"
end
</pre>


<pre id="tcsh" style="display: none">
# tcsh: Place this in .tcshrc
alias get_current_branch "bash -c '((git branch 2> /dev/null) | grep \* | cut -c3-)'"
alias _iterm2_user_defined_vars \
    'iterm2_set_user_var gitBranch `get_current_branch | base64`'

# Note: you always need to manually base64 encode the second argument to
# iterm2_set_user_var. If you want to define more than one variable,
# use the pattern:
# alias _iterm2_user_defined_vars \
#   '(iterm2_set_user_var key1 value1; iterm2_set_user_var key2 value2; ...)'
</pre>


<pre id="zsh" style="display: none">
# zsh: Place this in .zshrc after "source /Users/georgen/.iterm2_shell_integration.zsh".
iterm2_print_user_vars() {
  iterm2_set_user_var gitBranch $((git branch 2> /dev/null) | grep \* | cut -c3-)
}
</pre>


<br/>


<p>To reference a user-defined variable, refer to it as <em>\(user.variableName)</em>. For example, to use the example above, you could set your profile's badge to:</p>

<pre>
Current git branch on \(session.hostname) is \(user.gitBranch)
</pre>


<h3>Escape Sequences</h3>

<p>User-defined variables may be set with the following escape sequence:</p>

<pre>
OSC 1337 ; SetUserVar=<i>name</i>=<i>Base64-encoded value</i> ST
</pre>


<p>This is what iterm2_set_user_var sends. Generally you should use the <em>iterm2_print_user_vars</em> mechanism described above instead of sending this escape sequence directly.</p>

<p>The badge itself may be set with the following escape sequence:</p>

<pre>
OSC 1337 ; SetBadgeFormat=<i>Base-64 encoded badge format</i> ST
</pre>


<p>Here's an example that works in bash:</p>

<pre style="white-space: pre">
# Set badge to show the current session name and git branch, if any is set.
printf "\e]1337;SetBadgeFormat=%s\a" \
  $(echo -n "\(session.name) \(user.gitBranch)" | base64)
</pre>


<h3>Color</h3>

<p>The badge's color may be set in <em>Preferences&gt;Profiles&gt;Colors</em>.</p>

<p><a name="documentation-dynamic-profiles.html"></a></p>

<hr>


<h2>Dynamic Profiles</h2>

<p><em>Dynamic Profiles</em> is a feature that allows you to store your profiles in a file outside the usual macOS preferences database. Profiles may be changed at runtime by editing one or more plist files (formatted as JSON, XML, or in binary). Changes are picked up immediately.</p>

<h3>Availability</h3>

<p>Dynamic Profiles are available in iTerm2 2.9.20140923 and later.</p>

<h3>Usage</h3>

<p>When iTerm2 starts, it creates a folder:</p>

<pre>
~/Library/Application Support/iTerm2/DynamicProfiles
</pre>


<p>While iTerm2 runs, it monitors the contents of that folder. Any time the folder's contents change, all files in it are reloaded.</p>

<p>Files in this folder are expected to be formatted as Apple <a href="https://en.wikipedia.org/wiki/Property_list">Property Lists</a>. No particular file extension is required. All files in the folder must be valid property lists. If any is malformed, then no changes will be processed.</p>

<h3>Property List Format</h3>

<p>A property list describes a data structure consisting of arrays, dictionaries, strings, integers, and boolean values. Property lists may be written in JSON or XML. Here's an example of the skeletal structure of a JSON property list that iTerm2 expects for Dynamic Profiles:</p>

<pre>
{
  "Profiles": [
    {
       [attributes for the first profile go here]
    },
    {
       [attributes for the second profile go here]
    },
    [more profiles]
  ]
}
</pre>


<p>There are two required fields for each profile:</p>

<ul>
<li>Guid</li>
<li>Name</li>
</ul>


<p>The "Guid" is a globally unique identifier. It is used to track changes to the profile over time. No other profile should ever have the same guid. One easy way to generate a Guid is to use the <em>uuidgen</em> program, which comes standard with macOS.</p>

<p>The "Name" is the name, as seen in the Profiles window or in Preferences.</p>

<p>Here is a fully formed (but minimal) Dynamic Profiles plist:</p>

<pre>
{
  "Profiles": [
    {
      "Name": "Example",
      "Guid": "ba19744f-6af3-434d-aaa6-0a48e0969958"
    }
  ]
}
</pre>


<h3>Attributes</h3>

<p>Every profile preference that iTerm2 supports may be an attribute of a Dynamic Profile. Since there are dozens of attributes, you usually won't specify them all. Any attribute not specified will inherit its value from the default profile, or a specified "parent" profile (see below).</p>

<p>The easiest way to find the name and legal value of a profile attribute is to copy it from a known-good reference. To get the JSON for a profile you already have, follow these steps:</p>

<ol>
<li>Open Preferences &gt; Profiles</li>
<li>Select a profile</li>
<li>Open the <em>Other Actions</em> menu beneath the list of profiles</li>
<li>Select <em>Copy Profile as JSON</em></li>
<li>Paste the clipboard contents into your favorite text editor</li>
</ol>


<p>If you paste a whole profile into a Dynamic Profile this way, make sure you remember to change the Guid. A Dynamic Profile with a Guid equal to an existing Guid of a regular profile will be ignored.</p>

<h4>Parent Profiles</h4>

<p>Normally, a dynamic profile inherits any attributes you don't explicitly specify from the default profile. You may also specify a particular profile to inherit from using the <i>Dynamic Profile Parent Name</i> attribute. The value it takes is a profile name (that is, the name you see listed in the list of profiles in Preferences box). Profile names are not guaranteed to be unique, but they are more convenient than GUIDs. If no profile with the specified name is found, the default profile is used instead. For example:</p>

<pre>
{
  "Profiles": [
    {
      "Name": "Example",
      "Guid": "ba19744f-6af3-434d-aaa6-0a48e0969958",
      "Dynamic Profile Parent Name": "Light Background"
    }
  ]
}
</pre>


<h3>Minutiae</h3>

<p>Dynamic profiles are loaded in alphabetical order by filename. Within a particular file, they are loaded in the order they're listed in. This only matters if one dynamic profile references another dynamic profile as its parent; the parent should be placed so it loads before any of its children. For all other purposes, the filenames don't matter.</p>

<p>The <em>Dynamic</em> will automatically be added to all Dynamic Profiles.</p>

<h3>Troubleshooting</h3>

<p>If something goes wrong loading a Dynamic Profile, errors will be logged to /var/log/system.log, and are usually visible by running Console.app.</p>

<h3>Example</h3>

<p>Here's an example for a common use case: a list of profiles for <em>ssh</em>ing to various hosts. In this example, I've used the hostname as the Guid, which makes constructing this file a little easier and works well enough.</p>

<pre>
{
  "Profiles": [
    {
       "Name": "foo.example.com",
       "Guid": "foo.example.com",
       "Custom Command" : "Yes",
       "Command" : "ssh foo.example.com",
    },
    {
       "Name": "bar.example.com",
       "Guid": "bar.example.com",
       "Custom Command" : "Yes",
       "Command" : "ssh bar.example.com",
    },
  ]
}
</pre>


<p><a name="documentation-search-syntax.html"></a></p>

<hr>


<h2>Profile Search Syntax</h2>

<p>When iTerm2 presents a list of profiles, it usually includes a search box. The search box uses a special syntax that letes you tailor your searches to quickly find what you're looking for.</p>

<h3>Searching Profiles</h3>

<p>Each word in the search query must match at least one word in either the title or the tags of of a profile in order for that profile to be matched by the query. For a word to be a match, it must be a substring.</p>

<table style="background: white">
  <tr class="tableheader">
    <th style>Query</th>
    <td>&nbsp;&nbsp&nbsp;&nbsp;</td>
    <th>Profile Name</th>
    <td>&nbsp;&nbsp;</td>
    <th>Matches?</th>
  </tr>

  <tr>
    <td>Linux</td>
    <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td><b>Linux</b></td>
    <td>&nbsp;&nbsp;</td>
    <td>Yes</td>
  </tr>

  <tr>
    <td>x</td>
    <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td>Linu<b>x</b></td>
    <td>&nbsp;&nbsp;</td>
    <td>Yes</td>
  </tr>

  <tr>
    <td>z</td>
    <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td>Linux</td>
    <td>&nbsp;&nbsp;</td>
    <td>No</td>
  </tr>

  <tr>
    <td>George L</td>
    <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td><b>George</b>'s <b>L</b>inux Machine</td>
    <td>&nbsp;&nbsp;</td>
    <td>Yes</td>
  </tr>
</table>


<h3>Operators</h3>

<p>You may prefix a phrase in the search query with an <em>operator</em> to narrow your query. Only two operators are defined:</p>

<ul>
<li>The <em>name:</em> operator only tries to match words in the profile's name.</li>
<li>The <em>tag:</em> operator only tries to match words in the profile's tags.</li>
</ul>


<h3>Quoting</h3>

<p>You can require that two or more words occur in order by putting quotes in your query. For example:</p>

<table style="background: white; column-gap: 40px">
  <tr class="tableheader">
    <th style>Query</th>
    <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <th>Profile Name</th>
    <th>Matches?</th>
  </tr>

  <tr>
    <td>"Linux machine"</td>
    <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td>George's <b>Linux machine</b></td>
    <td>Yes</td>
  </tr>

  <tr>
    <td>"machine Linux"</td>
    <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td>Linux machine</td>
    <td>No</td>
  </tr>

</table>


<h3>Anchoring</h3>

<p>Normally, words in a query must match a substring of a word in the title or tags of a profile. You can require that a word in your query matches a prefix of a word in the title or tags by inserting a caret (<sup>)</sup> before the word. You can require that a word in your query matches the suffix of a word in the title or tags by appending a dollar sign ($) after the word. For example, the query <em><sup>a*</sup> matches only profiles with words starting with "a". The query </em>a$<em> matches words ending in "a". The query </em><sup>a$*</sup> matches only the word "a".</p>

<table style="background: white">
  <tr class="tableheader">
    <th style>Query</th>
    <td>&nbsp;&nbsp&nbsp;&nbsp;</td>
    <th>Profile Name</th>
    <th>Matches?</th>
  </tr>

  <tr>
    <td>^root</td>
    <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td>root@example.com</td>
    <td>Yes</td>
  </tr>

  <tr>
    <td>^root</td>
    <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td>Groot!</td>
    <td>No</td>
  </tr>

  <tr>
    <td>root$</td>
    <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td>Groot</td>
    <td>Yes</td>
  </tr>

  <tr>
    <td>^root$</td>
    <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td>Groot</td>
    <td>No</td>
  </tr>

  <tr>
    <td>^root$</td>
    <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td>root</td>
    <td>Yes</td>
  </tr>

</table>


<h3>Combining Features</h3>

<p>You may combine quoting, operators, and anchors. The operator always comes first, followed by a caret, followed by a quoted string, followed by a dollar sign. Consider the following examples:</p>

<pre>name:^"George's Linux Machine"$</pre>


<p>Three consecutive whole words in the profile's name must equal "George's Linux Machine".</p>

<pre>name:"George's Linux Machine"$</pre>


<p>Would match a profile named "XGeorge's Linux Machine", unlike the previous example.</p>

<pre>name:^"George's Linux Machine"</pre>


<p>Would match a profile named "George's Linux MachineX", unlike the first example.</p>

<pre>name:"George's Linux Machine"</pre>


<p>Would match a profile named "XGeorge's Linux MachineX", unlike the first example.</p>

<pre>name:^George's
name:George's$
name:^George's$
</pre>


<p>A word having the prefix, suffix, or exactly matching "George's" must occur in the profile's name to match these queries, respectively.</p>

<p><a name="documentation-automatic-profile-switching.html"></a></p>

<hr>


<h2>Automatic Profile Switching</h2>

<p>iTerm2 can use information it knows about your current path, host name, and user name to change profiles. For example, your window's background color or the terminal's character encoding could change when connecting to different hosts.</p>

<h3>Shell Integration Required</h3>

<p>You must install <a href="/shell_integration.html">Shell Integration</a> on all machines and all user accounts where you plan to use Automatic Profile Switching (either by using the scripts or the Triggers workaround described in the Shell Integration docs).</p>

<h4>Rule Syntax</h4>

<p>In <em>Preferences&gt;Profiles&gt;Advanced</em>, you may specify a set of rules.</p>

<p><img src="/images/AutomaticProfileSwitching.png"></p>

<p>When any session satisfies a rule in a given profile, it will switch to that profile. Rules consist of three optional components: the user name, the hostname, and the path. At least one component must be present, since an empty rule is not allowed. The hostname is required only when both a user name and a path are specified.</p>

<p>A user name is a unix accont name (e.g., <em>root</em>) followed by an <code>@</code>.</p>

<p>A path always begins with a <code>/</code>. Any time a hostname is followed by a path, they are separated by a <code>:</code>. For example, <code>iterm2.com:/users/george</code>. It may include <code>*</code> wildcards.</p>

<p>A hostname can be a DNS name, like <code>iterm2.com</code> or an IP address like <code>127.0.0.1</code>. A hostname may contain one or more <code>*</code> characters, which act as a wildcard (like globbing in Unix).</p>

<p>Some examples:</p>

<ul>
<li>george@iterm2.com:/users/george</li>
<li>george@*:/users/george</li>
<li>*:/users/george</li>
<li>*.iterm2.com:/users/george</li>
<li>dev.*.com:/users/george</li>
<li>george@iterm2.com</li>
<li>iterm2.com</li>
<li>george@</li>
<li>iterm2.com:/users/george</li>
<li>/users/george</li>
<li>/users/*</li>
</ul>


<p>Because more than one rule may match at any given time, more complex rules will take priority over less complex rules. The priority order is defined like this:</p>

<ul>
<li>A username, hostname, and path. For example, "george@iterm2.com:/Users/george".</li>
<li>A username and path, using "*" for the hostname. For example, "george@*:/Users/george".</li>
<li>A combination of username and hostname. For example, "george@iterm2.com".</li>
<li>A hostname and path. For example, "iterm2.com:/Users/george".</li>
<li>A hostname. For example, "iterm2.com".</li>
<li>A username alone. For example, "george@".</li>
<li>A path alone. For example, "/Users/george".</li>
</ul>


<p>The UI tries to prevent you from entering the same rule in two different profiles, but if that does happen then one profile is chosen arbitrarily.</p>

<h3>Automatic Reversion</h3>

<p>After APS switches a session's profile, its rules may eventually cease to match (for example, the hostname changes back to "localhost" because an ssh session ends). If no profile has a matching rule, the session's original profile will be restored.</p>

<h4>Implementation</h4>

<p>Each session maintains a stack of profiles. Initially, the stack contains the profile the session was created with. When the username, hostname, or path changes, iTerm2 finds the best-matching profile. If some profile has a matching rule, one of two things happens:</p>

<ul>
<li>If that profile is already on the stack, profiles above that one will be removed from the stack and the session will switch to that profile.</li>
<li>Failing that, the profile will be pushed on the stack and the session will switch to that profile.</li>
</ul>


<p>If no profile has a matching rule, the stack is emptied (except for the first entry, the original profile for the session) and the session reverts to its original profile.</p>

<p>Rules may begin with ! to indicate "stickiness". A sticky rule causes its profile to stay even after the rule no longer applies, so long as no other rule matches.</p>

<h3>Triggers</h3>

<p>Since it's impractical to install shell integration everywhere (for example, as <em>root</em>), there will be times when you need to write a trigger to detect the current username or hostname. Please see the <em>Triggers</em> section of <a href="/shell_integration.html">Shell Integration</a> for details.</p>

<h3>Troubleshooting</h3>

<p>There are a few ways things can go wrong. Please see the <a href="https://gitlab.com/gnachman/iterm2/wikis/scp-not-connecting">Why doesn't secure copy/automatic profile switching work?</a> document for help diagnosing and fixing these issues.</p>

<p><a name="documentation-coprocesses.html"></a></p>

<hr>


<h2>Coprocesses</h2>

<p>iTerm2 offers support for "coprocesses". This very powerful feature will allow you to interact with your terminal session in a new way.</p>

<h4>What is a Coprocess?</h4>

<p>A coprocess is a job, such as a shell script, that has a special relationship with a particular iTerm2 session. All output in a terminal window (that is, what you see on the screen) is also input to the coprocess. All output from the coprocess acts like text that the user is typing at the keyboard.</p>

<p>One obvious use of this feature is to automate interaction. For instance, suppose you want to automate your presence in a chat room. The following script could be used as a coprocess:</p>

<pre><code>#!/usr/bin/python
import sys
while True:
  line = raw_input()
  if line.strip() == "Are you there?":
    print "Yes"
  sys.stdout.flush()
</code></pre>

<p>You could disappear for years before your friends discover you're gone.</p>

<h4>How Do I Start a Coprocess?</h4>

<p>There are two ways to start a coprocess.</p>

<ol>
<li><p>Select "Run Coprocess..." from the Shell menu. Enter the name of a command to run as a coprocess.</p></li>
<li><p>Create a Trigger in Prefs>Profiles>Advanced and select Run Coprocess... as the action. Give the script to run as a parameter. Triggers also have Silent Coprocesses, which prevent any output from going to the screen. This is useful for ZModem, for example.</p></li>
</ol>


<h4>Usage</h4>

<p>A session can not have more than one coprocess at a time. When a coprocess is active, an icon will indicate that in the top right of the session.</p>

<h4>Technical Details</h4>

<p>The coprocess's stdin is a byte-for-byte copy of the input from the session's pty, beginning at the time the coprocess starts. In the case of a trigger-started coprocess, the line of input that triggered it MAY be the first line of input to the coprocess, but this is not guaranteed. If a coprocess is running, triggers with a Run Coprocess action will not fire. The coprocess's stdout stream will be treated the same as keyboard input. A small amount of buffering is provided for both input and output of the coprocess. When a buffer fills, the coprocess will block.</p>

<p><a name="documentation-restoration.html"></a></p>

<hr>


<h2>Session Restoration</h2>

<p>Session restoration works by running your jobs within long-lived servers rather than as child processes of iTerm2. If iTerm2 crashes or upgrades, the servers keep going. When iTerm2 restarts, it searches for running servers and connects to them. The OS's window restoration feature preserves the content of your window, including scrollback history. iTerm2 marries the restored session to the appropriate server so you can pick up where you were.</p>

<p>tl;dr watch this:
<a href="/misc/restoration-demo.mov">Demo Video</a></p>

<h3>Notes</h3>

<ul>
<li><p>You must turn off <strong>System Prefs &gt; General &gt; Close windows when quitting an app</strong>. For more information on system window restoration, please see <a href="https://support.apple.com/en-us/HT204005">Apple's docs</a>.</p></li>
<li><p>You must set <strong>Prefs &gt; General &gt; Startup</strong> to <strong>Use system window restoration settings</strong>.</p></li>
<li><p>Force quitting iTerm2, causing it to crash, or upgrading it when prompted should restore your sessions. <em>NOTE: Quitting iTerm2 with Cmd-Q will terminate your jobs and they won't be restored.</em> There is an advanced preference to change this behavior, though.</p></li>
<li><p>You can toggle this feature with <b>Prefs&gt;Advanced&gt;Enable session restoration.</b>, but you <em>must restart iTerm2 after changing this setting</em>.</p></li>
<li><p>A session that has had only its window contents restored and not the running processes will get a reverse video <em>Session Restored</em> banner. A properly restored session will pick up right where you left it.</p></li>
<li><p>If you reboot, your jobs will terminate and not be restored. The window contents should be restored.</p></li>
</ul>


<p><a name="documentation-utilities.html"></a></p>

<hr>


<h2>Utilities</h2>

<p>iTerm2 has a collection of shell scripts that help you take advantage of some of its unique features. When you install <a href="shell_integration.html">Shell Integration</a>, you're asked if you'd like to install the Utilities Package as well. This page describes these utilities.</p>

<h3>Components</h3>

<p>The Utilities Package contains the following programs:</p>

<h4>imgcat</h4>

<p>The <code>imgcat</code> program displays images inline in your terminal.</p>

<p><img src="images/inline_image_sparky_demo.png"></p>

<p>It supports all standard image formats, including animated GIFs.</p>

<pre>
Usage:
imgcat filename [filename...]

or

cat image | imgcat
</pre>


<h4>it2dl</h4>

<p>The <code>it2dl</code> program downloads files. This is useful when you are ssh'ed to a remote host. The downloaded files are placed in your <em>Downloads</em> folder.</p>

<pre>
Usage:
it2dl filename
</pre>


<h3>Location</h3>

<p>The Utilities Package places shell scripts in <code>$HOME/.iterm2/</code> and creates aliases to them at the bottom of <code>$HOME/.iterm2_shell_integration.$SHELL</code>.</p>

<p><a name="documentation-escape-codes.html"></a></p>

<hr>


<h2>Proprietary Escape Codes</h2>

<p>iTerm2 supports several non-standard escape codes. These may not work properly in tmux or screen, and may have unknown effects on other terminal emulators. Proceed with caution.</p>

<p>A quick comment on notation: in this document, ^[ means "Escape" (hex code 0x1b) and ^G means "bel" (hex code 0x07).</p>

<p>The OSC command <code>50</code> used to be used but it conflicts with xterm, so it is now <code>1337</code>.</p>

<h4>Set cursor shape</h4>

<pre><code>^[]1337;CursorShape=N^G
</code></pre>

<p>where N=0, 1, or 2.</p>

<ul>
        <li>0: Block</li>
        <li>1: Vertical bar</li>
        <li>2: Underline</li>
</ul>


<p>Add this to your .vimrc to change cursor shape in insert mode:</p>

<pre><code>let &amp;t_SI = "\&lt;Esc&gt;]1337;CursorShape=1\x7"
let &amp;t_EI = "\&lt;Esc&gt;]1337;CursorShape=0\x7"
</code></pre>

<p>This is derived from <a href="https://vim.wikia.com/wiki/Change_cursor_shape_in_different_modes">Konsole</a>.</p>

<h4>Set Mark</h4>

<p>The "Set Mark" (cmd-shift-M) command allows you to record a location and then jump back to it later (with cmd-shift-J). The following escape code has the same effect as that command:</p>

<pre><code>^[]1337;SetMark^G
</code></pre>

<h4>Steal Focus</h4>

<p>To bring iTerm2 to the foreground:</p>

<pre><code>^[]1337;StealFocus^G
</code></pre>

<h4>Clear Scrollback History</h4>

<p>To erase the scrollback history:</p>

<pre><code>^[]1337;ClearScrollback^G
</code></pre>

<h4>Set curent directory</h4>

<p>To inform iTerm2 of the current directory to help semantic history:</p>

<pre><code>^[]1337;CurrentDir=/the/current/directory^G
</code></pre>

<h4>Post a Growl notification</h4>

<p>To post a Growl notification:</p>

<pre><code>^[]9;Message content goes here^G
</code></pre>

<p>This will have no effect if Growl is not running.</p>

<h4>Change profile</h4>

<p>To change the session's profile on the fly:</p>

<pre><code>^[]1337;SetProfile=NewProfileName^G
</code></pre>

<h4>Copy to clipboard</h4>

<p>To place text in the pasteboard:</p>

<pre><code>^[]1337;CopyToClipboard=name^G
</code></pre>

<p>Where name is one of "rule", "find", "font", or empty to mean the general pasteboard (which is what you normally want). After this is sent, all text received is placed in the pasteboard until this code comes in:</p>

<pre><code>^[]1337;EndCopy^G
</code></pre>

<h4>Set window title and tab chrome background color</h4>

<p>To set the window title and tab color use this escape sequence:</p>

<pre><code>^[]6;1;bg;red;brightness;N^G
^[]6;1;bg;green;brightness;N^G
^[]6;1;bg;blue;brightness;N^G
</code></pre>

<p>Replace N with a decimal value in 0 to 255.</p>

<p>Example in bash that turns the background purple:</p>

<pre><code>echo -e "\033]6;1;bg;red;brightness;255\a"
echo -e "\033]6;1;bg;green;brightness;0\a"
echo -e "\033]6;1;bg;blue;brightness;255\a"
</code></pre>

<p>To reset the window title and tab color, use this code:</p>

<pre><code>^[]6;1;bg;*;default^G
</code></pre>

<p>For example:</p>

<pre><code>echo -e "\033]6;1;bg;*;default\a"
</code></pre>

<h4>Change the color palette</h4>

<pre><code>^[]Pnrrggbb^[\
</code></pre>

<p>Replace "n" with:</p>

<ul>
        <li>0-f (hex) = ansi color</li>
        <li>g = foreground</li>
        <li>h = background</li>
        <li>i = bold color</li>
        <li>j = selection color</li>
        <li>k = selected text color</li>
        <li>l = cursor</li>
        <li>m = cursor text</li>
</ul>


<p>rr, gg, bb are 2-digit hex value (for example, "ff").
Example in bash that changes the foreground color blue:</p>

<pre><code>echo -e "\033]Pg4040ff\033\\"
</code></pre>

<h4>Annotations</h4>

<p>To add an annotation use on of these sequences:</p>

<pre><code>^[]1337;AddAnnotation=message^G
^[]1337;AddAnnotation=length|message^G
^[]1337;AddAnnotation=message|length|x-coord|y-coord^G
^[]1337;AddHiddenAnnotation=message^G
^[]1337;AddHiddenAnnotation=length|message^G
^[]1337;AddHiddenAnnotation=message|length|x-coord|y-coord^G
</code></pre>

<ul>
<li>message: The message to attach to the annotation.</li>
<li>length: The number of cells to annotate. Defaults to the rest of the line beginning at the start of the annotation.</li>
<li>x-coord and y-coord: The starting coordinate for the annotation. Defaults to the cursor's coordinate.</li>
</ul>


<p><em>AddHiddenAnnotation</em> does not reveal the annotation window at the time the escape sequence is received, while <em>AddAnnotation</em> opens it immediately.</p>

<h4>Cursor Guide</h4>

<pre><code>^[]1337;HighlightCursorLine=boolean^G
</code></pre>

<p>The <em>boolean</em> should be <em>yes</em> or <em>no</em>. This shows or hides the cursor guide.</p>

<h4>Attention</h4>

<pre><code>^[]1337;RequestAttention=boolean^G
</code></pre>

<p>The boolean should be <em>yes</em> to request attention by bouncing the dock icon and <em>no</em> to cancel a previous request.</p>

<h4>Background Image</h4>

<pre><code>^[]1337;SetBackgroundImageFile=base64^G
</code></pre>

<p>The value of <em>base64</em> is a base64-encoded filename to display as a background image. If it is an empty string then the background image iwll be removed. User confirmation is required as a security measure.</p>

<h4>Report Cell Size</h4>

<pre><code>^[]1337;ReportCellSize^G
</code></pre>

<p>The terminal responds with:</p>

<pre><code>^[]1337;ReportCellSize=height;width^G
</code></pre>

<p>Where <em>height</em> and <em>width</em> are floating point values giving the size in points of a single character cell. For example:</p>

<pre><code>^[]1337;ReportCellSize=17.50;8.00^[\
</code></pre>

<h4>Badge</h4>

<p>The badge has custom escape sequences described <a href="badges.html">here</a>.</p>

<h4>Downloads</h4>

<p>For information on file downloads and inline images, see <a href="images.html">here</a>.</p>

<h2>Shell Integration/FinalTerm</h2>

<p>iTerm2's <a href="shell_integration.html">Shell Integration</a> feature is made
possible by proprietary escape sequences pioneered by the FinalTerm emulator.
FinalTerm is defunct, but the escape sequences are documented here.</p>

<h3>Definitions</h3>

<ul>
<li><code>OSC</code> stands for <em>Operating System Command</em>. In practice it refers to this
sequence of two ASCII characters: 27, 93 (<code>esc ]</code>).</li>
<li><code>ST</code> stands for <em>String Terminator</em>. It terminates an OSC sequence and
consists either of two ASCII characters 27, 92 (<code>esc \</code>) or ASCII 7 (<code>bel</code>).</li>
</ul>


<p>OSC sequences always begin with <code>OSC</code>, are followed by a sequence of
characters, and are terminated with <code>ST</code>.</p>

<p>Most <code>OSC</code> codes begin with a number (one or more decimal digits), which we'll
call the "command" in this document. If the command takes parameters it will be
followed by a semicolon and the structure of the rest of the body of the <code>OSC</code>
sequence is dependent on the command. Well-behaved terminal emulators ignore
<code>OSC</code> codes with unrecognized commands.</p>

<h3>Concepts</h3>

<p>The goal of the FinalTerm escape sequences is to mark up a shell's output with
semantic information about where the prompt begins, where the user-entered
command begins, and where the command's output begins and ends.</p>

<p><strong>[PROMPT]</strong>prompt% <strong>[COMMAND_START]</strong> ls -l<br>
<strong>[COMMAND_EXECUTED]</strong><br>
-rw-r--r--  1 user group   127 May  1  2016 filename<br>
<strong>[COMMAND_FINISHED]</strong></p>

<h3>Escape Sequences</h3>

<p>FinalTerm originally defined various escape sequences in its original spec that
are not supported by iTerm2 and are not described in this document. The best
remaining references to these codes are in iTerm2's source code.</p>

<h4>FTCS_PROMPT</h4>

<p><code>OSC 1 3 3 ; A ST</code></p>

<p>Sent just before start of shell prompt.</p>

<h4>FTCS_COMMAND_START</h4>

<p><code>OSC 1 3 3 ; B ST</code></p>

<p>Sent just after end of shell prompt, before the user-entered command.</p>

<h4>FTCS_COMMAND_EXECUTED</h4>

<p><code>OSC 1 3 3 ; C ST</code></p>

<p>Sent just before start of command output. All text between <code>FTCS_COMMAND_START</code>
and <code>FTCS_COMMAND_EXECUTED</code> at the time <code>FTCS_COMMAND_EXECUTED</code> is received
excluding terminal whitespace is considered the command the user entered. It is
expected that user-entered commands will be edited interactively, so the screen
contents are captured without regard to how they came to contain their state.
If the cursor's location is before (above, or if on the same line, left of) its
location when <code>FTCS_COMMAND_START</code> was received, then the command will be
treated as the empty string.</p>

<h4>FTCS_COMMAND_FINISHED</h4>

<p><code>OSC 1 3 3 ; D ; Ps ST</code></p>

<p><code>OSC 1 3 3 ; D ST</code> (for cancellation only)</p>

<p>The interpretation of this command depends on which <code>FTCS</code> was most recently
received prior to <code>FTCS_COMMAND_FINISHED</code>.</p>

<p>This command may be sent after <code>FTCS_COMMAND_START</code> to indicate that a command
was aborted. All state associated with the preceding prompt and the command
until its receipt will be deleted. Either form is accepted for an abort. If the
Ps argument is provided to an abort it will be ignored.</p>

<p>If this command is sent after <code>FTCS_COMMAND_EXECUTED</code>, then it indicates the
end of command prompt. Ps is the command's exit status, a number in the range
0-255 represented as one or more ASCII decimal digits. A status of 0 is
considered "success" and nonzero indicates "failure." The terminal may choose
to indicate this visually.</p>

<p>If neither <code>FTCS_COMMAND_START</code> nor <code>FTCS_COMMAND_EXECUTED</code> was sent prior to
<code>FTCS_COMMAND_FINISHED</code> it should be ignored.</p>

<h3>iTerm2 Extensions</h3>

<p>iTerm2 extends FinalTerm's suite of escape sequences.</p>

<h4>SetUserVar</h4>

<p><code>OSC 1 3 3 7 ; S e t U s e r V a r = Ps1 = Ps2 ST</code></p>

<p>Sets the value of a user-defined variable. iTerm2 keeps a dictionary of
key-value pairs which may be used within iTerm2 as string substitutions, such
as in the <a href="/badges.html">Badge</a>.</p>

<p>Ps1 is the key.</p>

<p>Ps2 is the base64-encoded value.</p>

<h4>ShellIntegrationVersion</h4>

<p><code>OSC 1 3 3 7 ; S h e l l I n t e g r a t i o n V e r s i o n = Pn ; Ps ST</code></p>

<p><code>OSC 1 3 3 7 ; S h e l l I n t e g r a t i o n V e r s i o n = Pn ST</code> (deprecated)</p>

<p>Reports the current version of the shell integration script.</p>

<p>Pn is the version.</p>

<p>Ps is the name of the shell (e.g., <code>bash</code>).</p>

<p>iTerm2 has a baked-in notion of the "current" version and if it sees a lower
number the user will be prompted to upgrade. The version number is specific to
the shell.</p>

<h4>RemoteHost</h4>

<p><code>OSC 1 3 3 7 ; R e m o t e H o s t = Ps1 @ Ps2 ST</code></p>

<p>Reports the user name and hostname.</p>

<p>Ps1 is username.
Ps2 is fully-qualified hostname.</p>

<h4>CurrentDir</h4>

<p><code>OSC 1 3 3 7 ; C u r r e n t D i r = Ps1 ST</code></p>

<p>Reports the current directory.</p>

<p>Ps1 is the current directory.</p>

<h6 class="question">Table of Contents</h6>
<div class="inner-menu">
        <ul class="root-nav">
          <div class="toc_subhead">Introduction</div>

<li><a href="documentation-highlights.html">Highlights for New Users</a></li>
<li><a href="documentation-general-usage.html">General Usage</a></li>

<div class="toc_subhead">User Interface</div>

<li><a href="documentation-menu-items.html">Menu Items</a></li>
<li><a href="documentation-preferences.html">Preferences</a></li>
<li><a href="documentation-touch-bar.html">Touch Bar</a></li>
<li><a href="documentation-copymode.html">Copy Mode</a></li>
<li><a href="documentation-fonts.html">Fonts</a></li>
<li><a href="documentation-search-syntax.html">Profile Search Syntax</a></li>

<div class="toc_subhead">Features</div>

<li><a href="documentation-automatic-profile-switching.html">Automatic Profile Switching</a></li>
<li><a href="documentation-badges.html">Badges</a></li>
<li><a href="documentation-buried-sessions.html">Buried Sessions</a></li>
<li><a href="documentation-captured-output.html">Captured Output</a></li>
<li><a href="documentation-coprocesses.html">Coprocesses</a></li>
<li><a href="documentation-hotkey.html">Hotkeys</a></li>
<li><a href="documentation-restoration.html">Session Restoration</a></li>
<li><a href="documentation-shell-integration.html">Shell Integration</a></li>
<li><a href="documentation-smart-selection.html">Smart Selection</a></li>
<li><a href="documentation-tmux-integration.html">tmux Integration</a></li>
<li><a href="documentation-triggers.html">Triggers</a></li>
<li><a href="documentation-utilities.html">Utilities</a></li>

<div class="toc_subhead">Advanced</div>

<li><a href="documentation-scripting.html">Scripting</a></li>
<li><a href="documentation-dynamic-profiles.html">Dynamic Profiles</a></li>
<li><a href="documentation-images.html">Inline Images Protocol</a></li>
<li><a href="documentation-escape-codes.html">Proprietary Escape Codes</a></li>

        </ul>
</div>
</div>

    </div>
  </div>
</div>
<footer>
  <div class="row">
    <div class="small-12 medium-12 large-10 large-centered columns text-center">
      <p>iTerm2 by George Nachman. Website by Matthew Freeman, George Nachman, and James A. Rosen.</p>
      <p>Website updated and optimized by <a href="http://hexbrain.com" target="_blank">HexBrain</a></p>
    </div>
  </div>
</footer>
<script src="/js/scripts.js"></script>                
<script type="text/javascript">
  function showId(id) {
    document.getElementById("changelist" + id).style.display = 'block';
    document.getElementById("show" + id).style.display = 'none';
    document.getElementById("hide" + id).style.display = 'inline';
  }

  function hideId(id) {
    document.getElementById("changelist" + id).style.display = 'none';
    document.getElementById("show" + id).style.display = 'inline';
    document.getElementById("hide" + id).style.display = 'none';
  }
  $(document).foundation();
</script>
</body>
</html>
